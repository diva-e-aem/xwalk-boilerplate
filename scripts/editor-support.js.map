{"version":3,"mappings":"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","names":["sampleRUM","checkpoint","data","timeShift","weight","id","isSelected","args","dataFromErrorObj","error","errData","line","reason","ck","time","pingData","rumData","url","origin","body","script","setup","scriptEl","scriptURL","init","wrapTextNodes","block","validWrappers","wrap","el","wrapper","nodeName","nodeValue","blockColumn","tagName","decorateButtons","element","a","up","twoup","decorateBlock","shortBlockName","section","xWalkDecorateBlock","decorateBlocks","main","collectBlocks","blockMap","t","e","n","o","c","decorators","throttle","domHelpers","r","i","s","d","l","u","f","getCurrentMQ","onEvent","apiHelpers","objectHelpers","g","m","isSidekickLibraryActive","getOrigin","getUrlForEndpoint","endpoint","location","basePath","normalizedEndpoint","fullPath","loadBlockModules","blockStatus","href","blockModule","DebuggerService","loadCSS","resolve","reject","link","loadBlockStyles","showSection","loadBlock","sectionsBlocks","blockPromises","loadBlocks","parentElement","SectionsPromises","decorateImages","item","adjustMarkup","wrappers","defaultContent","toClassName","name","toCamelCase","readBlockConfig","config","row","cols","col","value","as","imgs","img","ps","p","processSectionMetaData","sectionMeta","meta","key","style","transformSections","decorateRichtext","container","deleteInstrumentation","richtextResource","richtextProp","richtextFilter","richtextLabel","siblings","sibling","orphanElements","editable","orphanElement","group","observer","applyChanges","event","detail","resource","_b","_a","_e","_d","_c","_h","_g","_f","updates","_i","content","parsedUpdate","newMain","attachEventListners","_j","blockResource","newBlock","newElements","newSection","eventType"],"sources":["../libs/aemXWalk/aem.js","../src/app/tasks/decorateBlock.ts","../src/app/tasks/decorateBlocks.ts","../src/app/tasks/decorateButtons.ts","../src/app/tasks/collectBlocks.ts","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/function-helpers/decorators/index.js","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/dom-helpers/index.js","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/api-helpers/index.js","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/object-helpers/index.js","../node_modules/@kluntje/services/lib/index.module.js","../src/helpers/sidekick/isSidekickLibraryActive.ts","../src/helpers/sidekick/getOrigin.ts","../src/app/utils/getUrlForEndpoint.ts","../src/app/tasks/loadBlockModules.ts","../src/app/tasks/loadCSS.ts","../src/app/tasks/loadBlockStyles.ts","../src/app/tasks/showSection.ts","../src/app/tasks/loadBlock.ts","../src/app/tasks/loadBlocks.ts","../src/app/tasks/decorateImages.ts","../src/app/tasks/adjustMarkup.ts","../src/utils/toClassName.ts","../src/utils/toCamelCase.ts","../src/app/tasks/readBlockConfig.ts","../src/app/tasks/processSectionMetaData.ts","../src/app/tasks/transformSections.ts","../src/app/editor/editor-support-rte.ts","../src/app/editor/editor-support.ts"],"sourcesContent":["/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n/* eslint-env browser */\nfunction sampleRUM(checkpoint, data) {\n  // eslint-disable-next-line max-len\n  const timeShift = () => (window.performance ? window.performance.now() : Date.now() - window.hlx.rum.firstReadTime);\n  try {\n    window.hlx = window.hlx || {};\n    sampleRUM.enhance = () => {};\n    if (!window.hlx.rum) {\n      const weight =\n        (window.SAMPLE_PAGEVIEWS_AT_RATE === 'high' && 10) ||\n        (window.SAMPLE_PAGEVIEWS_AT_RATE === 'low' && 1000) ||\n        (new URLSearchParams(window.location.search).get('rum') === 'on' && 1) ||\n        100;\n      const id = Math.random().toString(36).slice(-4);\n      const isSelected = Math.random() * weight < 1;\n      // eslint-disable-next-line object-curly-newline, max-len\n      window.hlx.rum = {\n        weight,\n        id,\n        isSelected,\n        firstReadTime: window.performance ? window.performance.timeOrigin : Date.now(),\n        sampleRUM,\n        queue: [],\n        collector: (...args) => window.hlx.rum.queue.push(args),\n      };\n      if (isSelected) {\n        const dataFromErrorObj = (error) => {\n          const errData = { source: 'undefined error' };\n          try {\n            errData.target = error.toString();\n            errData.source = error.stack\n              .split('\\n')\n              .filter((line) => line.match(/https?:\\/\\//))\n              .shift()\n              .replace(/at ([^ ]+) \\((.+)\\)/, '$1@$2')\n              .replace(/ at /, '@')\n              .trim();\n          } catch (err) {\n            /* error structure was not as expected */\n          }\n          return errData;\n        };\n\n        window.addEventListener('error', ({ error }) => {\n          const errData = dataFromErrorObj(error);\n          sampleRUM('error', errData);\n        });\n\n        window.addEventListener('unhandledrejection', ({ reason }) => {\n          let errData = {\n            source: 'Unhandled Rejection',\n            target: reason || 'Unknown',\n          };\n          if (reason instanceof Error) {\n            errData = dataFromErrorObj(reason);\n          }\n          sampleRUM('error', errData);\n        });\n\n        sampleRUM.baseURL = sampleRUM.baseURL || new URL(window.RUM_BASE || '/', new URL('https://rum.hlx.page'));\n        sampleRUM.collectBaseURL = sampleRUM.collectBaseURL || sampleRUM.baseURL;\n        sampleRUM.sendPing = (ck, time, pingData = {}) => {\n          // eslint-disable-next-line max-len, object-curly-newline\n          const rumData = JSON.stringify({\n            weight,\n            id,\n            referer: window.location.href,\n            checkpoint: ck,\n            t: time,\n            ...pingData,\n          });\n          const { href: url, origin } = new URL(`.rum/${weight}`, sampleRUM.collectBaseURL);\n          const body = origin === window.location.origin ? new Blob([rumData], { type: 'application/json' }) : rumData;\n          navigator.sendBeacon(url, body);\n          // eslint-disable-next-line no-console\n          console.debug(`ping:${ck}`, pingData);\n        };\n        sampleRUM.sendPing('top', timeShift());\n\n        sampleRUM.enhance = () => {\n          const script = document.createElement('script');\n          script.src = new URL('.rum/@adobe/helix-rum-enhancer@^2/src/index.js', sampleRUM.baseURL).href;\n          document.head.appendChild(script);\n        };\n        if (!window.hlx.RUM_MANUAL_ENHANCE) {\n          sampleRUM.enhance();\n        }\n      }\n    }\n    if (window.hlx.rum && window.hlx.rum.isSelected && checkpoint) {\n      window.hlx.rum.collector(checkpoint, data, timeShift());\n    }\n    document.dispatchEvent(new CustomEvent('rum', { detail: { checkpoint, data } }));\n  } catch (error) {\n    // something went wrong\n  }\n}\n\n/**\n * Setup block utils.\n */\nfunction setup() {\n  window.hlx = window.hlx || {};\n  window.hlx.RUM_MASK_URL = 'full';\n  window.hlx.RUM_MANUAL_ENHANCE = true;\n  window.hlx.codeBasePath = '';\n  window.hlx.lighthouse = new URLSearchParams(window.location.search).get('lighthouse') === 'on';\n\n  const scriptEl = document.querySelector('script[src$=\"/scripts/scripts.js\"]');\n  if (scriptEl) {\n    try {\n      const scriptURL = new URL(scriptEl.src, window.location);\n      if (scriptURL.host === window.location.host) {\n        [window.hlx.codeBasePath] = scriptURL.pathname.split('/scripts/scripts.js');\n      } else {\n        [window.hlx.codeBasePath] = scriptURL.href.split('/scripts/scripts.js');\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  }\n}\n\n/**\n * Auto initializiation.\n */\n\nfunction init() {\n  setup();\n  sampleRUM();\n}\n\n/**\n * Sanitizes a string for use as class name.\n * @param {string} name The unsanitized string\n * @returns {string} The class name\n */\nfunction toClassName(name) {\n  return typeof name === 'string'\n    ? name\n        .toLowerCase()\n        .replace(/[^0-9a-z]/gi, '-')\n        .replace(/-+/g, '-')\n        .replace(/^-|-$/g, '')\n    : '';\n}\n\n/**\n * Sanitizes a string for use as a js property name.\n * @param {string} name The unsanitized string\n * @returns {string} The camelCased name\n */\nfunction toCamelCase(name) {\n  return toClassName(name).replace(/-([a-z])/g, (g) => g[1].toUpperCase());\n}\n\n/**\n * Extracts the config from a block.\n * @param {Element} block The block element\n * @returns {object} The block config\n */\n// eslint-disable-next-line import/prefer-default-export\nfunction readBlockConfig(block) {\n  const config = {};\n  block.querySelectorAll(':scope > div').forEach((row) => {\n    if (row.children) {\n      const cols = [...row.children];\n      if (cols[1]) {\n        const col = cols[1];\n        const name = toClassName(cols[0].textContent);\n        let value = '';\n        if (col.querySelector('a')) {\n          const as = [...col.querySelectorAll('a')];\n          if (as.length === 1) {\n            value = as[0].href;\n          } else {\n            value = as.map((a) => a.href);\n          }\n        } else if (col.querySelector('img')) {\n          const imgs = [...col.querySelectorAll('img')];\n          if (imgs.length === 1) {\n            value = imgs[0].src;\n          } else {\n            value = imgs.map((img) => img.src);\n          }\n        } else if (col.querySelector('p')) {\n          const ps = [...col.querySelectorAll('p')];\n          if (ps.length === 1) {\n            value = ps[0].textContent;\n          } else {\n            value = ps.map((p) => p.textContent);\n          }\n        } else value = row.children[1].textContent;\n        config[name] = value;\n      }\n    }\n  });\n  return config;\n}\n\n/**\n * Loads a CSS file.\n * @param {string} href URL to the CSS file\n */\nasync function loadCSS(href) {\n  return new Promise((resolve, reject) => {\n    if (!document.querySelector(`head > link[href=\"${href}\"]`)) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = href;\n      link.onload = resolve;\n      link.onerror = reject;\n      document.head.append(link);\n    } else {\n      resolve();\n    }\n  });\n}\n\n/**\n * Loads a non module JS file.\n * @param {string} src URL to the JS file\n * @param {Object} attrs additional optional attributes\n */\nasync function loadScript(src, attrs) {\n  return new Promise((resolve, reject) => {\n    if (!document.querySelector(`head > script[src=\"${src}\"]`)) {\n      const script = document.createElement('script');\n      script.src = src;\n      if (attrs) {\n        // eslint-disable-next-line no-restricted-syntax, guard-for-in\n        for (const attr in attrs) {\n          script.setAttribute(attr, attrs[attr]);\n        }\n      }\n      script.onload = resolve;\n      script.onerror = reject;\n      document.head.append(script);\n    } else {\n      resolve();\n    }\n  });\n}\n\n/**\n * Retrieves the content of metadata tags.\n * @param {string} name The metadata name (or property)\n * @param {Document} doc Document object to query for metadata. Defaults to the window's document\n * @returns {string} The metadata value(s)\n */\nfunction getMetadata(name, doc = document) {\n  const attr = name && name.includes(':') ? 'property' : 'name';\n  const meta = [...doc.head.querySelectorAll(`meta[${attr}=\"${name}\"]`)].map((m) => m.content).join(', ');\n  return meta || '';\n}\n\n/**\n * Returns a picture element with webp and fallbacks\n * @param {string} src The image URL\n * @param {string} [alt] The image alternative text\n * @param {boolean} [eager] Set loading attribute to eager\n * @param {Array} [breakpoints] Breakpoints and corresponding params (eg. width)\n * @returns {Element} The picture element\n */\nfunction createOptimizedPicture(\n  src,\n  alt = '',\n  eager = false,\n  breakpoints = [{ media: '(min-width: 600px)', width: '2000' }, { width: '750' }]\n) {\n  const url = new URL(src, window.location.href);\n  const picture = document.createElement('picture');\n  const { pathname } = url;\n  const ext = pathname.substring(pathname.lastIndexOf('.') + 1);\n\n  // webp\n  breakpoints.forEach((br) => {\n    const source = document.createElement('source');\n    if (br.media) source.setAttribute('media', br.media);\n    source.setAttribute('type', 'image/webp');\n    source.setAttribute('srcset', `${pathname}?width=${br.width}&format=webply&optimize=medium`);\n    picture.appendChild(source);\n  });\n\n  // fallback\n  breakpoints.forEach((br, i) => {\n    if (i < breakpoints.length - 1) {\n      const source = document.createElement('source');\n      if (br.media) source.setAttribute('media', br.media);\n      source.setAttribute('srcset', `${pathname}?width=${br.width}&format=${ext}&optimize=medium`);\n      picture.appendChild(source);\n    } else {\n      const img = document.createElement('img');\n      img.setAttribute('loading', eager ? 'eager' : 'lazy');\n      img.setAttribute('alt', alt);\n      picture.appendChild(img);\n      img.setAttribute('src', `${pathname}?width=${br.width}&format=${ext}&optimize=medium`);\n    }\n  });\n\n  return picture;\n}\n\n/**\n * Set template (page structure) and theme (page styles).\n */\nfunction decorateTemplateAndTheme() {\n  const addClasses = (element, classes) => {\n    classes.split(',').forEach((c) => {\n      element.classList.add(toClassName(c.trim()));\n    });\n  };\n  const template = getMetadata('template');\n  if (template) addClasses(document.body, template);\n  const theme = getMetadata('theme');\n  if (theme) addClasses(document.body, theme);\n}\n\n/**\n * Wrap inline text content of block cells within a <p> tag.\n * @param {Element} block the block element\n */\nfunction wrapTextNodes(block) {\n  const validWrappers = ['P', 'PRE', 'UL', 'OL', 'PICTURE', 'TABLE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n  const wrap = (el) => {\n    const wrapper = document.createElement('p');\n    wrapper.append(...el.childNodes);\n    [...el.attributes]\n      // move the instrumentation from the cell to the new paragraph, also keep the class\n      // in case the content is a buttton and the cell the button-container\n      .filter(\n        ({ nodeName }) =>\n          nodeName === 'class' || nodeName.startsWith('data-aue') || nodeName.startsWith('data-richtext')\n      )\n      .forEach(({ nodeName, nodeValue }) => {\n        wrapper.setAttribute(nodeName, nodeValue);\n        el.removeAttribute(nodeName);\n      });\n    el.append(wrapper);\n  };\n\n  block.querySelectorAll(':scope > div > div').forEach((blockColumn) => {\n    if (blockColumn.hasChildNodes()) {\n      const hasWrapper =\n        !!blockColumn.firstElementChild &&\n        validWrappers.some((tagName) => blockColumn.firstElementChild.tagName === tagName);\n      if (!hasWrapper) {\n        wrap(blockColumn);\n      } else if (\n        blockColumn.firstElementChild.tagName === 'PICTURE' &&\n        (blockColumn.children.length > 1 || !!blockColumn.textContent.trim())\n      ) {\n        wrap(blockColumn);\n      }\n    }\n  });\n}\n\n/**\n * Decorates paragraphs containing a single link as buttons.\n * @param {Element} element container element\n */\nfunction decorateButtons(element) {\n  element.querySelectorAll('a').forEach((a) => {\n    a.title = a.title || a.textContent;\n    if (a.href !== a.textContent) {\n      const up = a.parentElement;\n      const twoup = a.parentElement.parentElement;\n      if (!a.querySelector('img')) {\n        if (up.childNodes.length === 1 && (up.tagName === 'P' || up.tagName === 'DIV')) {\n          a.className = 'button'; // default\n          up.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'STRONG' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button primary';\n          twoup.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'EM' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button secondary';\n          twoup.classList.add('button-container');\n        }\n      }\n    }\n  });\n}\n\n/**\n * Add <img> for icon, prefixed with codeBasePath and optional prefix.\n * @param {Element} [span] span element with icon classes\n * @param {string} [prefix] prefix to be added to icon src\n * @param {string} [alt] alt text to be added to icon\n */\nfunction decorateIcon(span, prefix = '', alt = '') {\n  const iconName = Array.from(span.classList)\n    .find((c) => c.startsWith('icon-'))\n    .substring(5);\n  const img = document.createElement('img');\n  img.dataset.iconName = iconName;\n  img.src = `${window.hlx.codeBasePath}${prefix}/icons/${iconName}.svg`;\n  img.alt = alt;\n  img.loading = 'lazy';\n  span.append(img);\n}\n\n/**\n * Add <img> for icons, prefixed with codeBasePath and optional prefix.\n * @param {Element} [element] Element containing icons\n * @param {string} [prefix] prefix to be added to icon the src\n */\nfunction decorateIcons(element, prefix = '') {\n  const icons = [...element.querySelectorAll('span.icon')];\n  icons.forEach((span) => {\n    decorateIcon(span, prefix);\n  });\n}\n\n/**\n * Decorates all sections in a container element.\n * @param {Element} main The container element\n */\nfunction decorateSections(main) {\n  main.querySelectorAll(':scope > div:not([data-section-status])').forEach((section) => {\n    const wrappers = [];\n    let defaultContent = false;\n    [...section.children].forEach((e) => {\n      if ((e.tagName === 'DIV' && e.className) || !defaultContent) {\n        const wrapper = document.createElement('div');\n        wrappers.push(wrapper);\n        defaultContent = e.tagName !== 'DIV' || !e.className;\n        if (defaultContent) wrapper.classList.add('default-content-wrapper');\n      }\n      wrappers[wrappers.length - 1].append(e);\n    });\n    wrappers.forEach((wrapper) => section.append(wrapper));\n    section.classList.add('section');\n    section.dataset.sectionStatus = 'initialized';\n    section.style.display = 'none';\n\n    // Process section metadata\n    const sectionMeta = section.querySelector('div.section-metadata');\n    if (sectionMeta) {\n      const meta = readBlockConfig(sectionMeta);\n      Object.keys(meta).forEach((key) => {\n        if (key === 'style') {\n          const styles = meta.style\n            .split(',')\n            .filter((style) => style)\n            .map((style) => toClassName(style.trim()));\n          styles.forEach((style) => section.classList.add(style));\n        } else {\n          section.dataset[toCamelCase(key)] = meta[key];\n        }\n      });\n      sectionMeta.parentNode.remove();\n    }\n  });\n}\n\n/**\n * Gets placeholders object.\n * @param {string} [prefix] Location of placeholders\n * @returns {object} Window placeholders object\n */\n// eslint-disable-next-line import/prefer-default-export\nasync function fetchPlaceholders(prefix = 'default') {\n  window.placeholders = window.placeholders || {};\n  if (!window.placeholders[prefix]) {\n    window.placeholders[prefix] = new Promise((resolve) => {\n      fetch(`${prefix === 'default' ? '' : prefix}/placeholders.json`)\n        .then((resp) => {\n          if (resp.ok) {\n            return resp.json();\n          }\n          return {};\n        })\n        .then((json) => {\n          const placeholders = {};\n          json.data\n            .filter((placeholder) => placeholder.Key)\n            .forEach((placeholder) => {\n              placeholders[toCamelCase(placeholder.Key)] = placeholder.Text;\n            });\n          window.placeholders[prefix] = placeholders;\n          resolve(window.placeholders[prefix]);\n        })\n        .catch(() => {\n          // error loading placeholders\n          window.placeholders[prefix] = {};\n          resolve(window.placeholders[prefix]);\n        });\n    });\n  }\n  return window.placeholders[`${prefix}`];\n}\n\n/**\n * Builds a block DOM Element from a two dimensional array, string, or object\n * @param {string} blockName name of the block\n * @param {*} content two dimensional array or string or object of content\n */\nfunction buildBlock(blockName, content) {\n  const table = Array.isArray(content) ? content : [[content]];\n  const blockEl = document.createElement('div');\n  // build image block nested div structure\n  blockEl.classList.add(blockName);\n  table.forEach((row) => {\n    const rowEl = document.createElement('div');\n    row.forEach((col) => {\n      const colEl = document.createElement('div');\n      const vals = col.elems ? col.elems : [col];\n      vals.forEach((val) => {\n        if (val) {\n          if (typeof val === 'string') {\n            colEl.innerHTML += val;\n          } else {\n            colEl.appendChild(val);\n          }\n        }\n      });\n      rowEl.appendChild(colEl);\n    });\n    blockEl.appendChild(rowEl);\n  });\n  return blockEl;\n}\n\n/**\n * Loads JS and CSS for a block.\n * @param {Element} block The block element\n */\nasync function loadBlock(block) {\n  const status = block.dataset.blockStatus;\n  if (status !== 'loading' && status !== 'loaded') {\n    block.dataset.blockStatus = 'loading';\n    const { blockName } = block.dataset;\n    try {\n      const cssLoaded = loadCSS(`${window.hlx.codeBasePath}/blocks/${blockName}/${blockName}.css`);\n      const decorationComplete = new Promise((resolve) => {\n        (async () => {\n          try {\n            const mod = await import(`${window.hlx.codeBasePath}/blocks/${blockName}/${blockName}.js`);\n            if (mod.default) {\n              await mod.default(block);\n            }\n          } catch (error) {\n            // eslint-disable-next-line no-console\n            console.log(`failed to load module for ${blockName}`, error);\n          }\n          resolve();\n        })();\n      });\n      await Promise.all([cssLoaded, decorationComplete]);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(`failed to load block ${blockName}`, error);\n    }\n    block.dataset.blockStatus = 'loaded';\n  }\n  return block;\n}\n\n/**\n * Decorates a block.\n * @param {Element} block The block element\n */\nfunction decorateBlock(block) {\n  const shortBlockName = block.classList[0];\n  if (shortBlockName && !block.dataset.blockStatus) {\n    block.classList.add('block');\n    block.dataset.blockName = shortBlockName;\n    block.dataset.blockStatus = 'initialized';\n    wrapTextNodes(block);\n    const blockWrapper = block.parentElement;\n    blockWrapper.classList.add(`${shortBlockName}-wrapper`);\n    const section = block.closest('.section');\n    if (section) section.classList.add(`${shortBlockName}-container`);\n    // eslint-disable-next-line no-use-before-define\n    decorateButtons(block);\n  }\n}\n\n/**\n * Decorates all blocks in a container element.\n * @param {Element} main The container element\n */\nfunction decorateBlocks(main) {\n  main.querySelectorAll('div.section > div > div').forEach(decorateBlock);\n}\n\n/**\n * Loads a block named 'header' into header\n * @param {Element} header header element\n * @returns {Promise}\n */\nasync function loadHeader(header) {\n  const headerBlock = buildBlock('header', '');\n  header.append(headerBlock);\n  decorateBlock(headerBlock);\n  return loadBlock(headerBlock);\n}\n\n/**\n * Loads a block named 'footer' into footer\n * @param footer footer element\n * @returns {Promise}\n */\nasync function loadFooter(footer) {\n  const footerBlock = buildBlock('footer', '');\n  footer.append(footerBlock);\n  decorateBlock(footerBlock);\n  return loadBlock(footerBlock);\n}\n\n/**\n * Wait for Image.\n * @param {Element} section section element\n */\nasync function waitForFirstImage(section) {\n  const lcpCandidate = section.querySelector('img');\n  await new Promise((resolve) => {\n    if (lcpCandidate && !lcpCandidate.complete) {\n      lcpCandidate.setAttribute('loading', 'eager');\n      lcpCandidate.addEventListener('load', resolve);\n      lcpCandidate.addEventListener('error', resolve);\n    } else {\n      resolve();\n    }\n  });\n}\n\n/**\n * Loads all blocks in a section.\n * @param {Element} section The section element\n */\n\nasync function loadSection(section, loadCallback) {\n  const status = section.dataset.sectionStatus;\n  if (!status || status === 'initialized') {\n    section.dataset.sectionStatus = 'loading';\n    const blocks = [...section.querySelectorAll('div.block')];\n    for (let i = 0; i < blocks.length; i += 1) {\n      // eslint-disable-next-line no-await-in-loop\n      await loadBlock(blocks[i]);\n    }\n    if (loadCallback) await loadCallback(section);\n    section.dataset.sectionStatus = 'loaded';\n    section.style.display = null;\n  }\n}\n\n/**\n * Loads all sections.\n * @param {Element} element The parent element of sections to load\n */\n\nasync function loadSections(element) {\n  const sections = [...element.querySelectorAll('div.section')];\n  for (let i = 0; i < sections.length; i += 1) {\n    // eslint-disable-next-line no-await-in-loop\n    await loadSection(sections[i]);\n  }\n}\n\ninit();\n\nexport {\n  buildBlock,\n  createOptimizedPicture,\n  decorateBlock,\n  decorateBlocks,\n  decorateButtons,\n  decorateIcons,\n  decorateSections,\n  decorateTemplateAndTheme,\n  fetchPlaceholders,\n  getMetadata,\n  loadBlock,\n  loadCSS,\n  loadFooter,\n  loadHeader,\n  loadScript,\n  loadSection,\n  loadSections,\n  readBlockConfig,\n  sampleRUM,\n  setup,\n  toCamelCase,\n  toClassName,\n  waitForFirstImage,\n  wrapTextNodes,\n};\n","import { decorateBlock as xWalkDecorateBlock } from '../../../libs/aemXWalk/aem';\n\n/**\n * Decorate block with classes and data attributes.\n * @param {HTMLElement | null} block - Html block element\n */\nexport function decorateBlock(block: HTMLElement | null) {\n  xWalkDecorateBlock(block);\n}\n","import { decorateBlock } from './decorateBlock';\n\n/**\n * Decorate blocks with classes and data attributes.\n * @param {HTMLElement} main - Html main element\n */\nexport function decorateBlocks(main: HTMLElement | null) {\n  main?.querySelectorAll<HTMLDivElement>('div.section > div > div').forEach((block) => {\n    decorateBlock(block);\n  });\n}\n","/**\n * Decorates paragraphs containing a single link as buttons.\n * @param {Element} element container element\n */\nexport function decorateButtons(element: Element | null) {\n  element?.querySelectorAll('a').forEach((a) => {\n    a.title = a.title || a.textContent!;\n    if (a.href !== a.textContent) {\n      const up = a.parentElement!;\n      const twoup = a.parentElement!.parentElement!;\n      if (!a.querySelector('img')) {\n        if (up.childNodes.length === 1 && (up.tagName === 'P' || up.tagName === 'DIV')) {\n          a.className = 'button'; // default\n          up.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'STRONG' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button primary';\n          twoup.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'EM' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button secondary';\n          twoup.classList.add('button-container');\n        }\n      }\n    }\n  });\n}\n","import { BlockMapping } from '../app.types';\n\n/**\n * Collect all blocks in a section.\n * @param {HTMLElement} section - The section to collect the blocks from.\n * @returns {BlockMapping[]}\n * @example\n * const blocks = collectBlocks(section);\n * console.log(blocks);\n * Output: [{ name: 'block1', element: HTMLElement }, { name: 'block2', element: HTMLElement }]\n */\nexport function collectBlocks(section: HTMLElement): BlockMapping[] {\n  const blockMap: BlockMapping[] = [];\n  const blocksElements = section.querySelectorAll<HTMLDivElement>('[data-block-name]');\n\n  blocksElements.forEach((block: HTMLDivElement) => {\n    blockMap.push({\n      name: block.dataset.blockName as string,\n      element: block,\n    });\n  });\n\n  return blockMap;\n}\n","\"use strict\";function t(t){return function(...e){return function(n,o,c){return Object.assign(Object.assign({},c),{value:t(c.value,...e)})}}}Object.defineProperty(exports,\"__esModule\",{value:!0});const e=t((function(t,e=0){let n=-1;const o=function(...o){clearTimeout(n),n=window.setTimeout((()=>{t.call(this,...o)}),e)};return o.cancel=function(){clearTimeout(n)},o})),n=t((function(t,e=0){let n,o=[];const c=function(...c){o=c,void 0===n&&(n=window.setTimeout((()=>{n=void 0,t.call(this,...o)}),e))};return c.cancel=function(){clearTimeout(n),n=void 0},c}));exports.debounce=e,exports.throttle=n;\n//# sourceMappingURL=index.js.map\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e=(e,t)=>null===e?[]:e instanceof Document||null===e.shadowRoot||void 0===e.shadowRoot?Array.from(e.querySelectorAll(t)):Array.from(e.shadowRoot.querySelectorAll(t)),t=(e,...t)=>{if(void 0!==e&&0!==t.length&&null!==e){e instanceof Element&&(e=[e]),e instanceof NodeList&&(e=Array.from(e));for(const n of e)n.classList.remove(...t)}},n=(e,...t)=>{if(void 0!==e&&0!==t.length&&null!==e){e instanceof Element&&(e=[e]),e instanceof NodeList&&(e=Array.from(e));for(const n of e)n.classList.add(...t)}},o=(e,t)=>e.classList.contains(t);function r(e){return Symbol.iterator in e}function i(e){return\"length\"in e?e.length>0:!e[Symbol.iterator]().next().done}const s=(e,t,n,o,a)=>{if(null==e||r(e)&&!i(e))return;if(r(e)&&!(e instanceof HTMLElement)){for(const r of e)s(r,t,n,o,a);return}let d;d=\"string\"==typeof t?t.trim().split(\" \"):t,d.forEach((t=>{const r=l(e,t,n,o);if(!o.eventBindingMap[r]){const i=n.bind(o);return o.eventBindingMap[r]=i,e.addEventListener(t.trim(),i,a)}}))};function l(e,t,n,o){return`${a(e,o)}#\\n          ${t.trim()}#\\n          ${a(n,o)}#\\n          ${a(o,o)}`.replace(/\\n/gm,\"\").replace(/\\s/g,\"\")}function a(e,t){let n;if(t.eventIdMap.has(e))n=t.eventIdMap.get(e);else{const o=\"xxxxxxxx\".replace(/x/g,d).toLowerCase();t.eventIdMap.set(e,o),n=o}return n}function d(){return(100*Math.random()%36|0).toString(36)}const c=(e,t,n,o,s)=>{if(null==e||r(e)&&!i(e))return;if(r(e)&&!(e instanceof HTMLElement)){for(const r of e)c(r,t,n,o,s);return}let a;a=\"string\"==typeof t?t.trim().split(\" \"):t,a.forEach((t=>{const r=l(e,t,n,o),i=o.eventBindingMap[r];i&&(delete o.eventBindingMap[r],e.removeEventListener(t,i,s))}))},u=(t,n)=>{e(t,n).forEach((e=>t.removeChild(e)))},f=(e,t,n)=>new Promise((o=>{void 0!==n&&setTimeout((()=>o()),n),e.addEventListener(t,(()=>o()))}));exports.addClass=n,exports.find=(e,t)=>null===e?null:e instanceof Document||null===e.shadowRoot||void 0===e.shadowRoot?e.querySelector(t):e.shadowRoot.querySelector(t),exports.findAll=e,exports.forEachNode=(e,t,n=window)=>{for(let o=0;o<e.length;o++)t.call(n,e[o],o,e)},exports.getCurrentMQ=e=>{let t=\"\";return e.forEach((e=>{!t.length&&window.matchMedia(e.query).matches&&(t=e.name)})),t},exports.getInnerText=e=>e.innerText||e.textContent||\"\",exports.getParent=(e,t)=>e.closest(t),exports.getUniqueID=()=>Math.random().toString(36).substr(2,9),exports.hasChild=(e,t)=>null!==e.shadowRoot&&void 0!==e.shadowRoot?null!==e.shadowRoot.querySelector(t):null!==e.querySelector(t),exports.hasClass=o,exports.inViewport=(e,t)=>{const n=e.getBoundingClientRect();let o={top:0,right:window.innerWidth||document.documentElement.clientWidth,bottom:window.innerHeight||document.documentElement.clientHeight,left:0};return void 0!==t&&(o=t.getBoundingClientRect()),n.top>=o.top&&n.right<=o.right&&n.bottom<=o.bottom&&n.left>=o.left},exports.isNodeList=e=>!(e instanceof HTMLElement||e instanceof Window),exports.onEvent=s,exports.removeChildren=u,exports.removeChilds=u,exports.removeClass=t,exports.removeEvent=c,exports.toggleClass=(e,r,i)=>{if(null!=e){e instanceof Element&&(e=[e]),e instanceof NodeList&&(e=Array.from(e));for(const s of e)!0===i?n(s,r):o(s,r)||!1===i?t(s,r):n(s,r)}},exports.waitFor=e=>new Promise((t=>{setTimeout((()=>t()),e)})),exports.waitForAnimationEnd=function(e,t){return new Promise(((n,o)=>{e.addEventListener(\"animationend\",(function o(r){r.target===e&&(t&&r.animationName!==t||(e.removeEventListener(\"animationend\",o),n(r)))}))}))},exports.waitForEvent=f,exports.waitForInitialization=e=>{var t;return!0===(null===(t=e.state)||void 0===t?void 0:t.initialized)?Promise.resolve():f(e,\"kl-component-initialized\",3e3)},exports.waitForTransitionEnd=function(e,t){return new Promise(((n,o)=>{e.addEventListener(\"transitionend\",(function o(r){r.target===e&&(t&&r.propertyName!==t||(e.removeEventListener(\"transitionend\",o),n(r)))}))}))};\n//# sourceMappingURL=index.js.map\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});exports.fetchJSON=(e,t)=>new Promise(((o,s)=>{fetch(e,t).then((e=>{e.ok?o(e.json()):s(e)})).catch((e=>s(e)))}));\n//# sourceMappingURL=index.js.map\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e=e=>\"object\"==typeof e&&null!==e?JSON.stringify(e):String(e);exports.getValue=(e={},t=\"\")=>{const r=t.split(\".\");let o=0,n=e;for(;n&&o<r.length;)n=n[r[o]],o++;return n},exports.isEqual=(t,r)=>typeof t==typeof r&&(\"object\"==typeof t?0===e(t).localeCompare(e(r)):t===r),exports.isFilledObject=function(e){return\"object\"==typeof e&&null!==e&&Object.keys(e).length>0},exports.naiveClone=function e(t){return\"object\"!=typeof t?t:null===t?null:Array.isArray(t)?t.map((t=>e(t))):Object.entries(t).reduce(((t,[r,o])=>(t[r]=e(o),t)),{})},exports.toArray=e=>Array.isArray(e)?e:[e],exports.toString=e;\n//# sourceMappingURL=index.js.map\n","import{throttle as e}from\"@kluntje/js-utils/lib/function-helpers/decorators\";import{getCurrentMQ as t,onEvent as n}from\"@kluntje/js-utils/lib/dom-helpers\";import{fetchJSON as r}from\"@kluntje/js-utils/lib/api-helpers\";import{isFilledObject as s}from\"@kluntje/js-utils/lib/object-helpers\";const i=\"kl-mq-change\",a=\"kl-in-vp\",o=\"kl-out-vp\";class l{constructor(){}static getInstance(){return void 0===l.instance&&(l.instance=new IntersectionObserver(l.handleIntersectionChange)),l.instance}static handleIntersectionChange(e){Object.keys(e).forEach((t=>{const n=e[t],r=n.target;n.isIntersecting?r.dispatchEvent(new CustomEvent(\"kl-in-vp\",{bubbles:!1})):r.dispatchEvent(new CustomEvent(\"kl-out-vp\",{bubbles:!1}))}))}}\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */class c{constructor(){this.eventIdMap=new WeakMap,this.eventBindingMap={},this.lastMQ=t(c.mediaQuerys),n(window,\"resize\",this.handleMQChange,this)}static getInstance(e){return void 0===c.instance&&(c.mediaQuerys=e,c.instance=new c),c.instance}handleMQChange(){const e=t(c.mediaQuerys);e!==this.lastMQ&&(window.dispatchEvent(new CustomEvent(\"kl-mq-change\",{detail:{newMQ:e,oldMQ:this.lastMQ}})),this.lastMQ=e)}}!function(e,t,n,r){var s,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([e(100)],c.prototype,\"handleMQChange\",null);const h=Symbol(\"resolve\"),d=Symbol(\"reject\"),u=Symbol(\"pending\");class p{static get PLACEHOLDER_SELECTOR(){return\"kl-i18n-placeholder\"}static getInstance(){return void 0===p._instance&&(p._instance=new p),p._instance}get isSetUp(){return Boolean(this._url||s(this._dictionary))}get loaded(){return this._loaded}get ready(){return this._ready[u]||this.fetchI18nDictionary(),this._ready}setUp({url:e,dictionary:t}={}){if(this.isSetUp)console.warn(\"@kluntje I18nService: service has already been set up. You can't set it up twice!\");else if(e)this._url=e;else{if(!t)throw new Error('@kluntje I18nService: a \"url\" or \"dictionary\" should have been passed to the setUp function.');this._dictionary=t,this._loaded=!0,this._ready[h](),this._ready[u]=!0}}get(e,{fallback:t,interpolations:n}={}){if(this.loaded){if(this._dictionary.hasOwnProperty(e)){let t=this._dictionary[e];return n&&Object.entries(n).forEach((([e,n])=>{t=t.split(`{${e}}`).join(String(n))})),t}return console.warn(`@kluntje I18nService: i18n for key '${e}' is missing in dictionary!`),void 0!==t?t:this.getHumanReadableName(e)}return this._ready[u]||(this.addStyling(),this.fetchI18nDictionary()),this.getPlaceholder(e,{fallback:t,interpolations:n})}constructor(){this._loaded=!1,this._dictionary={},this._ready=this.getReadyPromise()}getReadyPromise(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n[h]=e,n[d]=t,n[u]=!1,n}ensureSetup(){if(!this.isSetUp)throw new Error(\"@kluntje I18nService: should be set up before calling other APIs\")}addStyling(){const e=document.head,t=document.createElement(\"style\");t.type=\"text/css\",t.appendChild(document.createTextNode(`\\n      .${p.PLACEHOLDER_SELECTOR} {\\n        display: contents;\\n      }\\n    `)),e.appendChild(t)}fetchI18nDictionary(){this.ensureSetup(),this._ready[u]=!0,r(this._url).then((e=>{this._dictionary=e,this._loaded=!0,this._ready[h](),this.fillInPlaceholders()})).catch((e=>{console.error(\"@kluntje I18nService: unable to fetch keys from server!\",e),this._loaded=!0,this._ready[h]()}))}fillInPlaceholders(){Array.from(document.getElementsByClassName(p.PLACEHOLDER_SELECTOR)).forEach((e=>{const{key:t,fallback:n,interpolations:r}=e.dataset;e.replaceWith(this.get(t,{fallback:n,interpolations:r?JSON.parse(r):void 0}))}))}getHumanReadableName(e){return e.split(\".\").reverse()[0].replace(/[A-Z]/g,(e=>` ${e.toLowerCase()}`))}getPlaceholder(e,{fallback:t,interpolations:n}={}){const r=document.createElement(\"span\");return r.innerText=void 0!==t?t:this.getHumanReadableName(e),r.classList.add(p.PLACEHOLDER_SELECTOR),r.setAttribute(\"data-key\",e),t&&r.setAttribute(\"data-fallback\",t),n&&r.setAttribute(\"data-interpolations\",JSON.stringify(n)),r.outerHTML}}var g=new class{constructor(){this.urlSearchParams=new URLSearchParams(window.location.search)}get(e){return this.urlSearchParams.get(e)}getAll(e){return this.urlSearchParams.getAll(e)}getAllKeys(){return Array.from(this.urlSearchParams.keys())}set(e,t){this.urlSearchParams.set(e,t),this.updateUrl()}delete(e){this.urlSearchParams.delete(e),this.updateUrl()}getString(){return this.urlSearchParams.toString()}get curUrl(){return`${window.location.protocol}//${window.location.host}${window.location.pathname}`}updateUrl(){const e=this.getString(),t=this.curUrl,n=window.location.hash,r=\"\"!==e?`${t}?${e}`:t;window.history.replaceState({path:r},\"\",r),\"\"!==n&&(window.location.hash=n)}};var m=new Proxy(console,{get:(e,t)=>null!==g.get(\"js-debug\")?e[t]:()=>{}});var y=new class{constructor(){this.componentMap=new WeakMap,this.intersectionObserver=new IntersectionObserver((e=>this.handleIntersectionChange(e)),{rootMargin:\"500px 0px\"})}subscribe(e,t){this.componentMap.set(e,t),this.intersectionObserver.observe(e)}unsubscribe(e){this.intersectionObserver.unobserve(e),this.componentMap.delete(e)}handleIntersectionChange(e){e.forEach((e=>{const t=e.target;if(!e.isIntersecting||!this.componentMap.has(t))return;const n=this.componentMap.get(t);this.unsubscribe(t),n()}))}};export{m as DebuggerService,p as I18nService,a as IN_VP_EVENT,y as LazyConnectService,i as MQ_CHANGE_EVENT,c as MediaQueryService,o as OUT_VP_EVENT,g as URLSearchParamsService,l as ViewportObserver};\n//# sourceMappingURL=index.module.js.map\n","/**\n * Verifies if the Sidekick Library Plugin is in use by checking if the page is running in an iframe with srcdoc\n * and if the main element has the sidekick-library class.\n * @returns {boolean} Whether the Sidekick Library Plugin is in use.\n */\nexport const isSidekickLibraryActive = (): boolean => {\n  const main = document.querySelector('#main');\n  if (!main) return false;\n  return window.location.href === 'about:srcdoc' && main.classList.contains('sidekick-library');\n};\n","import { isSidekickLibraryActive } from './isSidekickLibraryActive';\n\n/**\n * Returns the true origin of the current page in the browser.\n * If the page is running in an iframe with srcdoc, the ancestor origin is returned.\n * @returns {String} The true origin\n *\n * @example\n * const origin = getOrigin();\n *\n * @remarks\n * Needs to be used when the Sidekick Library Plugin is in use.\n */\nexport function getOrigin(): string {\n  return isSidekickLibraryActive() ? window.parent.location.origin : window.location.origin;\n}\n","import { getOrigin } from '../../helpers/sidekick/getOrigin';\n\n/**\n * Constructs a complete URL for a given endpoint relative to the base URL.\n * The base URL is derived from `window.hlx.codeBasePath` and the current location.\n * This helper respolves URLs for assets in different AEM contexts. (author, publish, local development, sidekick library etc.)\n * @param {string} endpoint - The endpoint of the asset or fetch request.\n * @returns {URL} - The complete URL for the given endpoint.\n *\n * @example\n * // Assuming window.hlx.codeBasePath is '/base/path/' and the origin is 'https://example.com'\n * const url = getUrlForEndpoint('/api/data');\n * console.log(url.href); // Output: 'https://example.com/base/path/api/data'\n */\nexport const getUrlForEndpoint = (endpoint: string): URL | never => {\n  try {\n    const location = getOrigin();\n    const basePath = window.hlx.codeBasePath.endsWith('/') ? window.hlx.codeBasePath : `${window.hlx.codeBasePath}/`;\n    let normalizedEndpoint = endpoint;\n\n    if (endpoint.startsWith('./')) {\n      normalizedEndpoint = endpoint.substring(2);\n    } else if (endpoint.startsWith('/')) {\n      normalizedEndpoint = endpoint.substring(1);\n    }\n\n    const fullPath = `${basePath}${normalizedEndpoint}`;\n    const url = new URL(fullPath, location);\n\n    return url;\n  } catch (error) {\n    throw new Error(`Failed to build Url for endpoint: ${error}`);\n  }\n};\n","import { DebuggerService } from '@kluntje/services';\n\nimport type { BlockModule } from 'Types/BlockModule.types';\n\nimport { BlockMapping } from '../app.types';\nimport { getUrlForEndpoint } from '../utils/getUrlForEndpoint';\n\nenum Status {\n  unloaded = 'unloaded',\n  loading = 'loading',\n  loaded = 'loaded',\n  error = 'error',\n  initialized = 'initialized',\n}\n\n/**\n * Load the es module for the block. The module should be named as the block name.\n * @param {BlockMapping} block - The block to load the module for.\n * @returns {Promise<void>}\n */\nexport async function loadBlockModules(block: BlockMapping): Promise<void> {\n  const blockStatus = (block.element.dataset.blockStatus as Status | undefined) ?? Status.unloaded;\n\n  if (blockStatus === Status.unloaded || blockStatus === Status.initialized) {\n    try {\n      block.element.dataset.blockStatus = Status.loading;\n      const { href } = getUrlForEndpoint(`dist/${block.name}/${block.name}.js`);\n      const blockModule = (await import(href)) as BlockModule;\n\n      if (blockModule.default) {\n        await blockModule.default(block.element);\n      }\n\n      block.element.dataset.blockStatus = Status.loaded;\n    } catch (error) {\n      block.element.dataset.blockStatus = Status.error;\n      DebuggerService.error('loadBlockModules:', error);\n    }\n  }\n}\n","import { getUrlForEndpoint } from '../utils/getUrlForEndpoint';\n\n/**\n * Load a CSS file if it is not already loaded append it to the head.\n * @param {string} endpoint - The endpoint of the CSS file.\n * @returns {Promise<void>}\n */\nexport function loadCSS(endpoint: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const { href } = getUrlForEndpoint(endpoint);\n\n    if (!document.querySelector(`head > link[href=\"${href}\"]`)) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = href;\n      link.onload = () => resolve();\n      link.onerror = reject;\n      document.head.append(link);\n    } else {\n      resolve();\n    }\n  });\n}\n","import { DebuggerService } from '@kluntje/services';\n\nimport { BlockMapping } from '../app.types';\nimport { loadCSS } from './loadCSS';\n\n/**\n * Load the block styles. The styles should be named as the block name.\n * @param {BlockMapping} block - The block to load the styles for.\n * @returns {Promise<void>}\n */\nexport async function loadBlockStyles(block: BlockMapping) {\n  try {\n    await loadCSS(`dist/${block.name}/${block.name}.css`);\n  } catch (error) {\n    DebuggerService.error('loadBlockStyles: Could not load css styles.', error);\n  }\n}\n","/**\n * Removes the display property from the section\n * @param {HTMLElement} section - The section to show\n */\nexport function showSection(section: HTMLElement) {\n  section.style.removeProperty('display');\n}\n","import { BlockMapping } from '../app.types';\nimport { collectBlocks } from './collectBlocks';\nimport { loadBlockModules } from './loadBlockModules';\nimport { loadBlockStyles } from './loadBlockStyles';\nimport { showSection } from './showSection';\n\n/**\n * Load the block modules and styles for a section and show the section.\n * @param {HTMLElement} section - The section to load the block modules and styles for.\n * @returns {Promise<void>}\n */\nexport async function loadBlock(section: HTMLElement): Promise<void> {\n  const sectionsBlocks: BlockMapping[] = collectBlocks(section);\n\n  if (!sectionsBlocks.length) {\n    showSection(section);\n    return;\n  }\n\n  const blockPromises: Promise<[void, void]>[] = [];\n\n  for (const block of sectionsBlocks) {\n    blockPromises.push(Promise.all([loadBlockModules(block), loadBlockStyles(block)]));\n  }\n\n  await Promise.all(blockPromises);\n  showSection(section);\n}\n","import { loadBlock } from './loadBlock';\n\n/**\n * Loads Blocks\n * by getting all sections and load every block in every section\n * and shows every section that is finished loading.\n * @param {Document | HTMLElement | null} parentElement - The parent element to load blocks into.\n */\nexport async function loadBlocks(parentElement: Document | HTMLElement | null = document) {\n  if (parentElement) {\n    const sections = [...parentElement.querySelectorAll<HTMLElement>('.section')];\n    const SectionsPromises = sections.map((section) => loadBlock(section));\n\n    await Promise.all(SectionsPromises);\n  }\n}\n","/*\n * This function is used to decorate images in the default content.\n * It adds the class 'image' and 'main' to the parent element of the image.\n */\nexport function decorateImages() {\n  const picture = document.querySelectorAll('.default-content-wrapper picture');\n  picture.forEach((item) => {\n    const parentElement = item.parentElement;\n    if (parentElement) {\n      parentElement.classList.add('image', 'main');\n    }\n  });\n}\n","import { decorateImages } from './decorateImages';\n\n/**\n * This function is used to adjust the markup of a section.\n * It wraps the default content in a div with the class 'default-content-wrapper'.\n * It also adds the class 'section' to the section element.\n * It decorates the images in the default content by calling the 'decorateImages' function.\n * It sets the 'data-section-status' attribute to 'initialized'.\n * It hides the section element.\n * @param {HTMLDivElement} section - The section element to adjust.\n */\nexport function adjustMarkup(section: HTMLDivElement) {\n  const wrappers: HTMLDivElement[] = [];\n  let defaultContent = false;\n  [...section.children].forEach((e) => {\n    if (e.tagName === 'DIV' || !defaultContent) {\n      const wrapper = document.createElement('div');\n      wrappers.push(wrapper);\n      defaultContent = e.tagName !== 'DIV';\n\n      if (defaultContent) {\n        wrapper.classList.add('default-content-wrapper');\n      }\n    }\n    wrappers[wrappers.length - 1].append(e);\n  });\n  wrappers.forEach((wrapper) => section.append(wrapper));\n  decorateImages();\n  section.classList.add('section');\n  section.dataset.sectionStatus = 'initialized';\n  section.style.display = 'none';\n}\n","/**\n * Converts a string into a valid CSS class name.\n *\n * @param {string} name - The string to convert into a CSS class name.\n * @returns {string} The converted CSS class name.\n *\n * @example\n * // Example usage:\n * const inputString = 'Hello, World!';\n * const cssClassName = toClassName(inputString);\n * console.log(cssClassName); // Output: 'hello-world'\n */\nexport function toClassName(name: string): string {\n  return name\n    .toLowerCase()\n    .replace(/[^0-9a-z]/gi, '-')\n    .replace(/-+/g, '-')\n    .replace(/^-|-$/g, '');\n}\n","import { toClassName } from './toClassName';\n\n/**\n * Sanitizes a string for use as a JavaScript property name.\n *\n * @param {string} name - The unsanitized string.\n * @returns {string} - The camelCased name.\n *\n * @example\n * // Example usage:\n * const unsanitizedString = 'background-color';\n * const camelCasedName = toCamelCase(unsanitizedString);\n * console.log(camelCasedName); // Output: 'backgroundColor'\n */\nexport function toCamelCase(name: string): string {\n  if (/^[a-z][A-Za-z0-9]*$/.test(name)) {\n    return name;\n  }\n\n  if (/^[A-Z][A-Za-z0-9]*$/.test(name)) {\n    return name.charAt(0).toLowerCase() + name.slice(1);\n  }\n\n  return toClassName(name).replace(/-([a-z])/g, (g: string) => g[1].toUpperCase());\n}\n","import { toClassName } from '../../utils/toClassName';\n\n/*\n  This function reads the configuration of a block from the HTML file\n  and returns it as a Record<string, string | string[]> object.\n  @param {Element} block The block element\n*/\nexport function readBlockConfig(block: Element): Record<string, string | string[]> {\n  const config: Record<string, string | string[]> = {};\n  block.querySelectorAll(':scope > div').forEach((row) => {\n    if (row.children) {\n      const cols = [...row.children];\n      if (cols[1]) {\n        const col = cols[1];\n        const name = toClassName(cols[0].textContent ?? '');\n        let value: string | string[] = '';\n        if (col.querySelector('a')) {\n          const as = [...col.querySelectorAll('a')];\n          if (as.length === 1) {\n            value = as[0].href;\n          } else {\n            value = as.map((a) => a.href);\n          }\n        } else if (col.querySelector('img')) {\n          const imgs = [...col.querySelectorAll('img')];\n          if (imgs.length === 1) {\n            value = imgs[0].src;\n          } else {\n            value = imgs.map((img) => img.src);\n          }\n        } else if (col.querySelector('p')) {\n          const ps = [...col.querySelectorAll('p')];\n          if (ps.length === 1) {\n            value = ps[0].textContent!;\n          } else {\n            value = ps.map((p) => p.textContent!);\n          }\n        } else {\n          value = row.children[1].textContent!;\n        }\n        config[name] = value;\n      }\n    }\n  });\n  return config;\n}\n","import { toCamelCase } from '../../utils/toCamelCase';\nimport { toClassName } from '../../utils/toClassName';\nimport { readBlockConfig } from './readBlockConfig';\n\n/*\n  This function processes the metadata of a section and applies it to the section element.\n  @param {HTMLElement} section The section element\n*/\nexport function processSectionMetaData(section: HTMLElement) {\n  const sectionMeta = section.querySelector('div.section-metadata');\n  if (sectionMeta) {\n    const meta = readBlockConfig(sectionMeta);\n    Object.keys(meta).forEach((key) => {\n      if (key === 'style') {\n        const styles = (meta.style as string)\n          .split(',')\n          .filter((style: string) => style)\n          .map((style: string) => toClassName(style.trim()));\n        styles.forEach((style: string) => section.classList.add(style));\n      } else {\n        // @ts-ignore - browsers do seem to convert arrays via join(\",\") when setting the attribute value, although it is not in the spec\n        section.dataset[toCamelCase(key)] = meta[key];\n      }\n    });\n    if (sectionMeta.parentElement) sectionMeta.parentElement.remove();\n  }\n}\n","import { adjustMarkup } from './adjustMarkup';\nimport { processSectionMetaData } from './processSectionMetaData';\n\n/**\n * This function is used to transform the sections of the main element.\n * It adjusts the markup of each section by calling the 'adjustMarkup' function.\n * It processes the metadata of each section by calling the 'processSectionMetaData' function.\n * @param {HTMLElement} main - The main element to transform.\n */\nexport function transformSections(main: HTMLElement | null) {\n  main?.querySelectorAll<HTMLDivElement>(':scope > div').forEach((section) => {\n    adjustMarkup(section);\n    processSectionMetaData(section);\n  });\n}\n","/* eslint-disable */\n/* TODO: fix eslint issues and types*/\n\n// group editable texts in single wrappers if applicable.\n// this script should execute after script.js but before the the universal editor cors script\n// and any block being loaded\n\nexport function decorateRichtext(container: Document | HTMLElement | null = document) {\n  function deleteInstrumentation(element) {\n    delete element.dataset.richtextResource;\n    delete element.dataset.richtextProp;\n    delete element.dataset.richtextFilter;\n    delete element.dataset.richtextLabel;\n  }\n\n  let element;\n  while ((element = container?.querySelector('[data-richtext-prop]:not(div)'))) {\n    const { richtextResource, richtextProp, richtextFilter, richtextLabel } = element.dataset;\n    deleteInstrumentation(element);\n    const siblings: any = [];\n    let sibling = element;\n    while ((sibling = sibling.nextElementSibling)) {\n      if (sibling.dataset.richtextResource === richtextResource && sibling.dataset.richtextProp === richtextProp) {\n        deleteInstrumentation(sibling);\n        siblings.push(sibling);\n      } else break;\n    }\n\n    let orphanElements;\n    if (richtextResource && richtextProp) {\n      orphanElements = document.querySelectorAll(\n        `[data-richtext-id=\"${richtextResource}\"][data-richtext-prop=\"${richtextProp}\"]`\n      );\n    } else {\n      const editable = element.closest('[data-aue-resource]');\n      if (editable) {\n        orphanElements = editable.querySelectorAll(\n          `:scope > :not([data-aue-resource]) [data-richtext-prop=\"${richtextProp}\"]`\n        );\n      } else {\n        console.warn(`Editable parent not found or richtext property ${richtextProp}`);\n        return;\n      }\n    }\n\n    if (orphanElements.length) {\n      console.warn(\n        'Found orphan elements of a richtext, that were not consecutive siblings of ' + 'the first paragraph',\n        orphanElements\n      );\n      orphanElements.forEach((orphanElement) => deleteInstrumentation(orphanElement));\n    } else {\n      const group = document.createElement('div');\n      if (richtextResource) {\n        group.dataset.aueResource = richtextResource;\n        group.dataset.aueBehavior = 'component';\n      }\n      if (richtextProp) group.dataset.aueProp = richtextProp;\n      if (richtextLabel) group.dataset.aueLabel = richtextLabel;\n      if (richtextFilter) group.dataset.aueFilter = richtextFilter;\n      group.dataset.aueType = 'richtext';\n      element.replaceWith(group);\n      group.append(element, ...siblings);\n    }\n  }\n}\n\n// in cases where the block decoration is not done in one synchronous iteration we need to listen\n// for new richtext-instrumented elements\nconst observer = new MutationObserver(() => decorateRichtext());\nobserver.observe(document, { attributeFilter: ['data-richtext-prop'], subtree: true });\n\ndecorateRichtext();\n/* eslint-enable */\n","import { decorateBlock } from '../tasks/decorateBlock';\nimport { decorateBlocks } from '../tasks/decorateBlocks';\nimport { decorateButtons } from '../tasks/decorateButtons';\nimport { loadBlock } from '../tasks/loadBlock';\nimport { loadBlocks } from '../tasks/loadBlocks';\nimport { transformSections } from '../tasks/transformSections';\nimport { decorateRichtext } from './editor-support-rte';\n\ninterface EventDetail {\n  request?: {\n    target?: {\n      resource?: string;\n      container?: {\n        resource?: string;\n      };\n    };\n    to?: {\n      container?: {\n        resource?: string;\n      };\n    };\n  };\n  response?: {\n    updates: Array<{\n      content?: string;\n    }>;\n  };\n}\n\nasync function applyChanges(event: CustomEvent<EventDetail>): Promise<boolean> {\n  // redecorate default content and blocks on patches (in the properties rail)\n  const { detail } = event;\n\n  const resource =\n    detail?.request?.target?.resource || // update, patch components\n    detail?.request?.target?.container?.resource || // update, patch, add to sections\n    detail?.request?.to?.container?.resource; // move in sections\n  if (!resource) return false;\n  const updates = detail?.response?.updates;\n  if (!updates || updates.length === 0) return false;\n  const { content } = updates[0];\n  if (!content) return false;\n\n  const parsedUpdate = new DOMParser().parseFromString(content, 'text/html');\n  const element = document.querySelector(`[data-aue-resource=\"${resource}\"]`);\n\n  if (element) {\n    if (element.matches('main')) {\n      const newMain = parsedUpdate.querySelector(`[data-aue-resource=\"${resource}\"]`) as HTMLElement;\n      if (newMain) {\n        newMain.style.display = 'none';\n        element.insertAdjacentElement('afterend', newMain);\n        decorateButtons(newMain);\n        transformSections(newMain);\n        decorateBlocks(newMain);\n        decorateRichtext(newMain);\n        await loadBlocks(newMain);\n        element.remove();\n        newMain.style.removeProperty('display');\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        attachEventListners(newMain);\n      }\n      return true;\n    }\n\n    const block =\n      element.parentElement?.closest('.block[data-aue-resource]') || element?.closest('.block[data-aue-resource]');\n    if (block) {\n      const blockResource = block.getAttribute('data-aue-resource');\n      const newBlock = parsedUpdate.querySelector(`[data-aue-resource=\"${blockResource}\"]`) as HTMLElement;\n      if (newBlock) {\n        newBlock.style.display = 'none';\n        block.insertAdjacentElement('afterend', newBlock);\n        decorateButtons(newBlock);\n        decorateBlock(newBlock);\n        decorateRichtext(newBlock);\n        await loadBlock(newBlock);\n        block.remove();\n        newBlock.style.removeProperty('display');\n        return true;\n      }\n    } else {\n      // sections and default content, may be multiple in the case of richtext\n      const newElements = parsedUpdate.querySelectorAll(\n        `[data-aue-resource=\"${resource}\"],[data-richtext-resource=\"${resource}\"]`\n      );\n      if (newElements.length) {\n        const { parentElement } = element;\n        if (element.matches('.section')) {\n          const [newSection] = newElements as NodeListOf<HTMLElement>;\n          newSection.style.display = 'none';\n          element.insertAdjacentElement('afterend', newSection);\n          decorateButtons(newSection);\n          decorateRichtext(newSection);\n          transformSections(parentElement);\n          decorateBlocks(parentElement);\n          await loadBlocks(parentElement);\n          element.remove();\n          newSection.style.removeProperty('display');\n        } else {\n          element.replaceWith(...Array.from(newElements));\n          decorateButtons(parentElement);\n          decorateRichtext(parentElement);\n        }\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction attachEventListners(main: HTMLElement) {\n  ['aue:content-patch', 'aue:content-update', 'aue:content-add', 'aue:content-move', 'aue:content-remove'].forEach(\n    (eventType) =>\n      // eslint-disable-next-line @typescript-eslint/no-misused-promises\n      main?.addEventListener(eventType, async (event: CustomEvent<EventDetail>) => {\n        event.stopPropagation();\n        const applied = await applyChanges(event);\n        if (!applied) window.location.reload();\n      })\n  );\n}\n\nattachEventListners(document.querySelector('main') as HTMLElement);\n"],"file":"editor-support.js"}