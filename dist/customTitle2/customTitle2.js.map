{"version":3,"file":"customTitle2.js","sources":["../../src/blocks/customTitle2/customTitle2.ts"],"sourcesContent":["import { html, literal, StaticValue } from 'lit/static-html.js';\nimport { nothing, render, TemplateResult } from 'lit';\nimport './customTitle2.scss';\n\nimport { getElementData } from 'Utils/getElementData';\n// import { moveInstrumentation } from 'Helpers/moveInstrumentation';\nimport { getBlockModifiers } from 'Utils/getBlockModifiers';\nimport { cleanUpBlock } from 'Utils/cleanUpBlock';\nimport { moveInstrumentation } from 'Helpers/moveInstrumentation';\n\ntype TemplateProps = {\n  titleText?: string;\n  subline?: string;\n  tagName?: string;\n  cssClass?: string;\n  sublineLarge?: string;\n};\n\nconst possibleStyleModifiers = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\nconst getStyleModifier = (modifiers: string[]) => {\n  return modifiers.find((modifier) => possibleStyleModifiers.includes(modifier)) || 'h1';\n};\n\nconst renderHeadline = (tagName: string, text: string, cssClass: string) => {\n  const tagMap: Record<string, StaticValue> = {\n    h1: literal`h1`,\n    h2: literal`h2`,\n    h3: literal`h3`,\n    h4: literal`h4`,\n    h5: literal`h5`,\n    h6: literal`h6`,\n  };\n\n  const tag = tagMap[tagName];\n\n  return html`\n    <${tag} class=\"module-headline ${cssClass}\" data-js-title>${text}</${tag}>\n  `;\n};\n\nconst renderSubline = (subline: string, sublineLarge?: string) => {\n  if (subline === '') return nothing;\n  return html`<p class=\"module-subtitle${sublineLarge === 'large-subline' ? ' large-subline' : ''}\" data-js-subline>\n    ${subline}\n  </p>`;\n};\n\nconst template = ({\n  titleText,\n  subline = '',\n  tagName = 'h2',\n  cssClass = 'h1',\n  sublineLarge = '',\n}: TemplateProps): TemplateResult | typeof nothing => {\n  if (!titleText) {\n    return nothing;\n  }\n\n  return html`\n    <div class=\"module-title\">\n      ${renderHeadline(tagName, titleText, cssClass)}${renderSubline(subline, sublineLarge)}\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const modifiers = getBlockModifiers(block, 'customtitle');\n  const getDataForRow = getElementData(block);\n  const { title } = getDataForRow(0, ['title']);\n  const { titleOptions } = getDataForRow(1, ['titleOptions']);\n  const { subline } = getDataForRow(2, ['subline']);\n  const { sublineOptions } = getDataForRow(3, ['sublineOptions']);\n  const titleElement = title.element;\n  const titleOptionsElement = titleOptions.element;\n  const sublineElement = subline.element;\n  const sublineOptionsElement = sublineOptions.element;\n  const tagName = titleOptionsElement?.textContent?.toLowerCase() || 'h2';\n\n  cleanUpBlock(block);\n\n  render(\n    template({\n      titleText: titleElement?.textContent || '',\n      subline: sublineElement?.textContent || '',\n      tagName,\n      cssClass: getStyleModifier(modifiers),\n      sublineLarge: sublineOptionsElement?.textContent?.includes('large-subline') ? 'large-subline' : '',\n    }),\n    block\n  );\n\n  const newTitleElement = block.querySelector('[data-js-title]') as HTMLElement;\n  const newSublineElement = block.querySelector('[data-js-subline]') as HTMLElement;\n\n  if (titleElement) moveInstrumentation(titleElement, newTitleElement);\n  if (sublineElement) moveInstrumentation(sublineElement, newSublineElement);\n}\n"],"names":["possibleStyleModifiers","getStyleModifier","modifiers","modifier","renderHeadline","tagName","text","cssClass","tag","literal","html","renderSubline","subline","sublineLarge","nothing","template","titleText","customTitle2","block","getBlockModifiers","getDataForRow","getElementData","title","titleOptions","sublineOptions","titleElement","titleOptionsElement","sublineElement","sublineOptionsElement","_a","cleanUpBlock","render","_b","newTitleElement","newSublineElement","moveInstrumentation"],"mappings":"iUAkBA,MAAMA,EAAyB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAE5DC,EAAoBC,GACjBA,EAAU,KAAMC,GAAaH,EAAuB,SAASG,CAAQ,CAAC,GAAK,KAG9EC,EAAiB,CAACC,EAAiBC,EAAcC,IAAqB,CAUpE,MAAAC,EATsC,CAC1C,GAAIC,MACJ,GAAIA,MACJ,GAAIA,MACJ,GAAIA,MACJ,GAAIA,MACJ,GAAIA,KAAA,EAGaJ,CAAO,EAEnB,OAAAK;AAAAA,OACFF,CAAG,2BAA2BD,CAAQ,mBAAmBD,CAAI,KAAKE,CAAG;AAAA,GAE5E,EAEMG,EAAgB,CAACC,EAAiBC,IAClCD,IAAY,GAAWE,EACpBJ,6BAAgCG,IAAiB,gBAAkB,iBAAmB,EAAE;AAAA,MAC3FD,CAAO;AAAA,QAIPG,EAAW,CAAC,CAChB,UAAAC,EACA,QAAAJ,EAAU,GACV,QAAAP,EAAU,KACV,SAAAE,EAAW,KACX,aAAAM,EAAe,EACjB,IACOG,EAIEN;AAAAA;AAAAA,QAEDN,EAAeC,EAASW,EAAWT,CAAQ,CAAC,GAAGI,EAAcC,EAASC,CAAY,CAAC;AAAA;AAAA,IALhFC,EAUX,SAAAG,EAAyBC,EAAoB,SACrC,MAAAhB,EAAYiB,EAAkBD,EAAO,aAAa,EAClDE,EAAgBC,EAAeH,CAAK,EACpC,CAAE,MAAAI,CAAM,EAAIF,EAAc,EAAG,CAAC,OAAO,CAAC,EACtC,CAAE,aAAAG,CAAa,EAAIH,EAAc,EAAG,CAAC,cAAc,CAAC,EACpD,CAAE,QAAAR,CAAQ,EAAIQ,EAAc,EAAG,CAAC,SAAS,CAAC,EAC1C,CAAE,eAAAI,CAAe,EAAIJ,EAAc,EAAG,CAAC,gBAAgB,CAAC,EACxDK,EAAeH,EAAM,QACrBI,EAAsBH,EAAa,QACnCI,EAAiBf,EAAQ,QACzBgB,EAAwBJ,EAAe,QACvCnB,IAAUwB,EAAAH,GAAA,YAAAA,EAAqB,cAArB,YAAAG,EAAkC,gBAAiB,KAEnEC,EAAaZ,CAAK,EAElBa,EACEhB,EAAS,CACP,WAAWU,GAAA,YAAAA,EAAc,cAAe,GACxC,SAASE,GAAA,YAAAA,EAAgB,cAAe,GACxC,QAAAtB,EACA,SAAUJ,EAAiBC,CAAS,EACpC,cAAc8B,EAAAJ,GAAA,YAAAA,EAAuB,cAAvB,MAAAI,EAAoC,SAAS,iBAAmB,gBAAkB,EAAA,CACjG,EACDd,CAAA,EAGI,MAAAe,EAAkBf,EAAM,cAAc,iBAAiB,EACvDgB,EAAoBhB,EAAM,cAAc,mBAAmB,EAE7DO,GAAcU,EAAoBV,EAAcQ,CAAe,EAC/DN,GAAgBQ,EAAoBR,EAAgBO,CAAiB,CAC3E"}