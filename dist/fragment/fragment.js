import{d as a,e as c,f as l,g as f}from"../__chunks__/decorateBlocks.BXNgUJ5b.js";import"../__chunks__/index.module.CR-9466T.js";import"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";async function m(t){if(t&&t.startsWith("/")){t=t.replace(/(\.plain)?\.html/,"");const r=await fetch(`${t}.plain.html`);if(r.ok){const e=document.createElement("main");e.innerHTML=await r.text();const s=(i,n)=>{e.querySelectorAll(`${i}[${n}^="./media_"]`).forEach(o=>{o[n]=new URL(o.getAttribute(n)??"",new URL(t,window.location.origin)).href})};return s("img","src"),s("source","srcset"),a(e),c(e),l(e),await f(e),e}}return null}async function w(t){var i;const r=t.querySelector("a"),e=r?r.getAttribute("href"):(i=t.textContent)==null?void 0:i.trim();if(!e)return;const s=await m(e);if(s){const n=s.querySelector(":scope .section");n&&(t.classList.add(...n.classList),t.classList.remove("section"),t.replaceChildren(...n.childNodes))}}export{w as default,m as loadFragment};
//# sourceMappingURL=fragment.js.map
