import{d as a,b as c,c as l,e as m}from"../__chunks__/decorateBlocks.zO8n8sUO.js";import"../__chunks__/preload-helper.DX1wzJSG.js";import"../__chunks__/index.module.DQI0LCqS.js";import"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";async function f(t){if(t&&t.startsWith("/")){t=t.replace(/(\.plain)?\.html/,"");const r=await fetch(`${t}.plain.html`);if(r.ok){const e=document.createElement("main");e.innerHTML=await r.text();const i=(s,n)=>{e.querySelectorAll(`${s}[${n}^="./media_"]`).forEach(o=>{o[n]=new URL(o.getAttribute(n)??"",new URL(t,window.location.origin)).href})};return i("img","src"),i("source","srcset"),a(e),c(e),l(e),await m(e),e}}return null}async function p(t){var s;const r=t.querySelector("a"),e=r?r.getAttribute("href"):(s=t.textContent)==null?void 0:s.trim();if(!e)return;const i=await f(e);if(i){const n=i.querySelector(":scope .section");n&&(t.classList.add(...n.classList),t.classList.remove("section"),t.replaceChildren(...n.childNodes))}}export{p as default,f as loadFragment};
//# sourceMappingURL=fragment.js.map
