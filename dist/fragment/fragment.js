import{c as a,e as c,f as l,g as f}from"../__chunks__/decorateBlocks.D8UuuymJ.js";import"../__chunks__/preload-helper.DX1wzJSG.js";async function u(e){if(e&&e.startsWith("/")){e=e.replace(/(\.plain)?\.html/,"");const r=await fetch(`${e}.plain.html`);if(r.ok){const t=document.createElement("main");t.innerHTML=await r.text();const i=(s,n)=>{t.querySelectorAll(`${s}[${n}^="./media_"]`).forEach(o=>{o[n]=new URL(o.getAttribute(n)??"",new URL(e,window.location.origin)).href})};return i("img","src"),i("source","srcset"),a(t),c(t),l(t),await f(t),t}}return null}async function g(e){var s;const r=e.querySelector("a"),t=r?r.getAttribute("href"):(s=e.textContent)==null?void 0:s.trim();if(!t)return;const i=await u(t);if(i){const n=i.querySelector(":scope .section");n&&(e.classList.add(...n.classList),e.classList.remove("section"),e.replaceChildren(...n.childNodes))}}export{g as default,u as loadFragment};
//# sourceMappingURL=fragment.js.map
