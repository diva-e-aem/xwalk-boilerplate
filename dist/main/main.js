import"../__chunks__/icon.Cp5I9S5b.js";import{m as d}from"../__chunks__/index.module.DQI0LCqS.js";import{i as h}from"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";import{d as S,l as z,s as E,a as C,b as v,c as T,e as D,f as B,g as A}from"../__chunks__/decorateBlocks.D8UuuymJ.js";import{g as $}from"../__chunks__/getMetadata.C2EoXxjz.js";import"../__chunks__/preload-helper.DX1wzJSG.js";import"../__chunks__/lit-element.BYUc91cE.js";import"../__chunks__/unsafe-html.CzzwY3gx.js";const q=()=>{try{return window.self!==window.top}catch{return!0}};function U(){S()}function x(s){return s.trim()===""?void 0:s}function I(){const s=$("language");document.documentElement.lang=x(s)||"en"}function R(){return h()?window.parent.location:window.location}function F(){return h()?window.parent.location.origin:window.location.origin}const H=s=>{try{const e=F(),a=window.hlx.codeBasePath.endsWith("/")?window.hlx.codeBasePath:`${window.hlx.codeBasePath}/`;let t=s;s.startsWith("./")?t=s.substring(2):s.startsWith("/")&&(t=s.substring(1));const i=`${a}${t}`;return new URL(i,e)}catch(e){throw new Error(`Failed to build Url for endpoint: ${e}`)}};async function l(s){const{href:e}=H(s);await z(e)}const f={mainTsPath:"./src/main.ts",mainScssPath:"./src/styles/sass/main.scss",iconsDirPath:"./public/icons",iconsTypesPath:"./src/types/icons.types.ts",fontsScssPath:"./src/styles/sass/fonts.scss",fontsCssPath:"./dist/fonts/fonts.css",lazyStylesScssPath:"./src/styles/sass/lazy-styles.scss",lazyStylesCssPath:"./dist/lazyStyles/lazyStyles.css",sidekickLibraryStylesScssPath:"./src/styles/sass/sidekick-library-styles.scss",sidekickLibraryStylesCssPath:"./dist/sidekickLibraryStyles/sidekickLibraryStyles.css",universalEditorStylesScssPath:"./src/styles/sass/universal-editor-styles.scss",universalEditorStylesCssPath:"./dist/universalEditorStyles/universalEditorStyles.css",editorTsPath:"./src/app/editor/editor-support.ts",lcpBlocks:[]};async function g(){const{fontsCssPath:s}=f;if(s){await l(s);try{R().hostname.includes("localhost")||sessionStorage.setItem("fonts-loaded","true")}catch(e){d.error("loadFonts: Error setting fonts-loaded in session storage",e)}}}function n(s,e={}){E(s,e)}function M(s="/dist/main/main.js"){C();const e=document.querySelector(`script[src$="${s}"]`);if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split(s)}catch(a){d.log("setupHlxObj: Could not set codeBasePath.",a)}}function O(){M(),n("top")}async function L(s){v(s)}async function W(){const s=document.querySelector(".section"),e=document.querySelector("main img"),{lcpBlocks:a}=f;if(s){const t=[...s.querySelectorAll("div.block")],i=[];for(const o of t)if(a!=null&&a.includes(o.dataset.blockName)&&i.push(L(o)),i.length<1&&t.length>0){const c=t[0];i.push(L(c))}await Promise.all(i),s.style.removeProperty("display")}document.body.style.display==="none"&&(document.body.style.display=null),await new Promise(t=>{e&&!e.complete?(e.setAttribute("loading","eager"),e.setAttribute("fetchpriority","high"),e.addEventListener("load",i=>t(i)),e.addEventListener("error",i=>t(i))):t()})}class j{constructor(){this.beforeEagerCallbacks=[],this.loadEagerCallbacks=[],this.beforeLoadLazyCallbacks=[],this.loadLazyCallbacks=[],this.beforeLoadDelayedCallbacks=[],this.loadDelayedCallbacks=[],this.initializedCallbacks=[]}get beforeEager(){return this.beforeEagerPromise===void 0&&(this.beforeEagerPromise=this.beforeLoadEager()),this.beforeEagerPromise}get loadEager(){return this.eagerPromise===void 0&&(this.eagerPromise=this.loadEagerPromise()),this.eagerPromise}get beforeLoadLazy(){return this.beforeLazyPromise===void 0&&(this.beforeLazyPromise=this.beforeLoadLazyPromise()),this.beforeLazyPromise}get loadLazy(){return this.lazyPromise===void 0&&(this.lazyPromise=this.loadLazyPromise()),this.lazyPromise}get beforeLoadDelayed(){return this.beforeDelayedPromise===void 0&&(this.beforeDelayedPromise=this.beforeLoadDelayedPromise()),this.beforeDelayedPromise}get loadDelayed(){return this.delayedPromise===void 0&&(this.delayedPromise=this.loadDelayedPromise()),this.delayedPromise}get initialized(){return this.initializedPromise===void 0&&(this.initializedPromise=this.getInitializedPromise()),this.initializedPromise}addBeforeEagerTask(e){this.beforeEagerCallbacks.push(e)}addLoadEagerTask(e){this.loadEagerCallbacks.push(e)}addBeforeLoadLazyTask(e){this.beforeLoadLazyCallbacks.push(e)}addLoadLazyTask(e){this.loadLazyCallbacks.push(e)}addBeforeLoadDelayedTask(e){this.beforeLoadDelayedCallbacks.push(e)}addLoadDelayedTask(e){this.loadDelayedCallbacks.push(e)}addInitializedTask(e){this.initializedCallbacks.push(e)}async init(){await this.beforeEager,await this.loadEager,await this.beforeLoadLazy,await this.loadLazy,await this.beforeLoadDelayed,await this.loadDelayed,await this.initialized}async beforeLoadEager(){const e=new Promise(a=>{O(),U(),I(),a()});await Promise.all([...this.beforeEagerCallbacks.map(a=>a()),e])}async loadEagerPromise(){const e=new Promise(async a=>{try{const t=document.querySelector("main");T(t),D(t),B(t),document.body.classList.add("show"),(window.innerWidth>=900||sessionStorage.getItem("fonts-loaded"))&&await g(),a()}catch(t){d.error("index: could not load fonts",t)}});await Promise.all([...this.loadEagerCallbacks.map(a=>a()),e,W()])}async beforeLoadLazyPromise(){const e=new Promise(a=>a());await Promise.all([...this.beforeLoadLazyCallbacks.map(a=>a()),e])}async loadLazyPromise(){const e=new Promise(async a=>{try{const{lazyStylesScssPath:t,fontsScssPath:i,lazyStylesCssPath:o,sidekickLibraryStylesScssPath:c,sidekickLibraryStylesCssPath:u,universalEditorStylesScssPath:p,universalEditorStylesCssPath:b}=f,y=document.querySelector("main");await A(y);const{hash:m}=window.location,P=m?document.getElementById(m.substring(1)):!1;m&&P&&P.scrollIntoView(),t&&o&&await l(o),c&&u&&h()&&await l(u),p&&b&&q()&&await l(b),i&&await g(),n("lazy"),n.observe(y.querySelectorAll("div[data-block-name]")),n.observe(y.querySelectorAll("picture > img"))}catch(t){d.error("LoadLazyTask: ",t)}a()});await Promise.all([...this.loadLazyCallbacks.map(a=>a()),e])}async beforeLoadDelayedPromise(){const e=new Promise(a=>a());await Promise.all([...this.beforeLoadDelayedCallbacks.map(a=>a()),e])}async loadDelayedPromise(){const e=new Promise(a=>{setTimeout(()=>{a()},3e3)});await Promise.all([...this.loadDelayedCallbacks.map(a=>a()),e])}async getInitializedPromise(){const e=new Promise(a=>a());await Promise.all([...this.initializedCallbacks.map(a=>a()),e])}}const w=new j,r={interactive:"interactive",complete:"complete"};async function k(){w.addBeforeEagerTask(()=>(document.getElementsByTagName("main")[0].setAttribute("id","main"),Promise.resolve())),await w.init()}function X(){document.readyState===r.interactive||document.readyState===r.complete?k():document.addEventListener("readystatechange",()=>{const s=document.readyState;(s===r.interactive||s===r.complete)&&k()})}X();
//# sourceMappingURL=main.js.map
