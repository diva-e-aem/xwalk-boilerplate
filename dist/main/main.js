import"../__chunks__/icon.Cp5I9S5b.js";import{m as w}from"../__chunks__/index.module.DQI0LCqS.js";import{i as C}from"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";import{t as T,l as u,c as D,a as L,b as p,s as x,d as B,e as R,f as A,g as U}from"../__chunks__/decorateBlocks.BB7mVK_I.js";import{g as b}from"../__chunks__/getMetadata.C2EoXxjz.js";import"../__chunks__/preload-helper.DX1wzJSG.js";import"../__chunks__/lit-element.BYUc91cE.js";import"../__chunks__/unsafe-html.CzzwY3gx.js";const M=()=>{try{return window.self!==window.top}catch{return!0}},k=(s,e)=>{e.split(",").forEach(a=>{s.classList.add(T(a.trim()))})};function I(){const s=b("template");s&&k(document.body,s);const e=b("theme");e&&k(document.body,e)}function q(s){return s.trim()===""?void 0:s}function j(){const s=b("language");document.documentElement.lang=q(s)||"en"}function _(){return C()?window.parent.location:window.location}const g={mainTsPath:"./src/main.ts",mainScssPath:"./src/styles/sass/main.scss",iconsDirPath:"./public/icons",iconsTypesPath:"./src/types/icons.types.ts",fontsScssPath:"./src/styles/sass/fonts.scss",fontsCssPath:"./dist/fonts/fonts.css",lazyStylesScssPath:"./src/styles/sass/lazy-styles.scss",lazyStylesCssPath:"./dist/lazyStyles/lazyStyles.css",sidekickLibraryStylesScssPath:"./src/styles/sass/sidekick-library-styles.scss",sidekickLibraryStylesCssPath:"./dist/sidekickLibraryStyles/sidekickLibraryStyles.css",universalEditorStylesScssPath:"./src/styles/sass/universal-editor-styles.scss",universalEditorStylesCssPath:"./dist/universalEditorStyles/universalEditorStyles.css",editorTsPath:"./src/app/editor/editor-support.ts",lcpBlocks:[]};async function S(){const{fontsCssPath:s}=g;if(s){await u(s);try{_().hostname.includes("localhost")||sessionStorage.setItem("fonts-loaded","true")}catch(e){w.error("loadFonts: Error setting fonts-loaded in session storage",e)}}}function i(s,e={}){i.defer=i.defer||[];const a=t=>{i[t]=i[t]||((...o)=>i.defer.push({fnname:t,args:o}))};i.drain=i.drain||((t,o)=>{i[t]=o,i.defer.filter(({fnname:r})=>t===r).forEach(({fnname:r,args:n})=>i[r](...n))}),i.always=i.always||[],i.always.on=(t,o)=>{i.always[t]=o},i.on=(t,o)=>{i.cases[t]=o},a("observe"),a("cwv");try{if(window.hlx=window.hlx||{},!window.hlx.rum){const d=new URLSearchParams(window.location.search).get("rum")==="on"?1:100,l=Array.from({length:75},(P,v)=>String.fromCharCode(48+v)).filter(P=>/\d|[A-Z]/i.test(P)).filter(()=>Math.random()*75>70).join(""),c=Math.random(),m=c*d<1,h=Date.now(),y={full:()=>window.location.href,origin:()=>window.location.origin,path:()=>window.location.href.replace(/\?.*$/,"")};window.hlx.rum={weight:d,id:l,random:c,isSelected:m,firstReadTime:h,sampleRUM:i,sanitizeURL:y[window.hlx.RUM_MASK_URL||"path"]}}const{weight:t,id:o,firstReadTime:r}=window.hlx.rum;if(window.hlx&&window.hlx.rum&&window.hlx.rum.isSelected){const n=["weight","id","referer","checkpoint","t","source","target","cwv","CLS","FID","LCP","INP"],d=(l=e)=>{const c=JSON.stringify({weight:t,id:o,referer:window.hlx.rum.sanitizeURL(),checkpoint:s,t:Date.now()-r,...e},n),m=`https://rum.hlx.page/.rum/${t}`;navigator.sendBeacon(m,c),console.debug(`ping:${s}`,l)};i.cases=i.cases||{cwv:()=>i.cwv(e)||!0,lazy:()=>{const l=document.createElement("script");return l.src="https://rum.hlx.page/.rum/@adobe/helix-rum-enhancer@^1/src/index.js",document.head.appendChild(l),!0}},d(e),i.cases[s]&&i.cases[s]()}i.always[s]&&i.always[s](e)}catch{}}function $(s="/dist/main/main.js"){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on";const e=document.querySelector(`script[src$="${s}"]`);if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split(s)}catch(a){w.log("setupHlxObj: Could not set codeBasePath.",a)}}function H(){$(),i("top"),window.addEventListener("load",()=>i("load")),window.addEventListener("unhandledrejection",s=>{i("error",{source:s.reason.sourceURL,target:s.reason.line})}),window.addEventListener("error",s=>{i("error",{source:s.filename,target:s.lineno})})}async function F(){const s=document.querySelector(".section"),e=document.querySelector("main img"),{lcpBlocks:a}=g;if(s){const t=D(s),o=[];for(const r of t)if(a!=null&&a.includes(r.name)&&o.push(L(r),p(r)),o.length<1&&t.length>0){const n=t[0];o.push(L(n),p(n))}await Promise.all(o),x(s)}document.body.style.display==="none"&&(document.body.style.display=null),await new Promise(t=>{e&&!e.complete?(e.setAttribute("loading","eager"),e.setAttribute("fetchpriority","high"),e.addEventListener("load",o=>t(o)),e.addEventListener("error",o=>t(o))):t()})}class N{constructor(){this.beforeEagerCallbacks=[],this.loadEagerCallbacks=[],this.beforeLoadLazyCallbacks=[],this.loadLazyCallbacks=[],this.beforeLoadDelayedCallbacks=[],this.loadDelayedCallbacks=[],this.initializedCallbacks=[]}get beforeEager(){return this.beforeEagerPromise===void 0&&(this.beforeEagerPromise=this.beforeLoadEager()),this.beforeEagerPromise}get loadEager(){return this.eagerPromise===void 0&&(this.eagerPromise=this.loadEagerPromise()),this.eagerPromise}get beforeLoadLazy(){return this.beforeLazyPromise===void 0&&(this.beforeLazyPromise=this.beforeLoadLazyPromise()),this.beforeLazyPromise}get loadLazy(){return this.lazyPromise===void 0&&(this.lazyPromise=this.loadLazyPromise()),this.lazyPromise}get beforeLoadDelayed(){return this.beforeDelayedPromise===void 0&&(this.beforeDelayedPromise=this.beforeLoadDelayedPromise()),this.beforeDelayedPromise}get loadDelayed(){return this.delayedPromise===void 0&&(this.delayedPromise=this.loadDelayedPromise()),this.delayedPromise}get initialized(){return this.initializedPromise===void 0&&(this.initializedPromise=this.getInitializedPromise()),this.initializedPromise}addBeforeEagerTask(e){this.beforeEagerCallbacks.push(e)}addLoadEagerTask(e){this.loadEagerCallbacks.push(e)}addBeforeLoadLazyTask(e){this.beforeLoadLazyCallbacks.push(e)}addLoadLazyTask(e){this.loadLazyCallbacks.push(e)}addBeforeLoadDelayedTask(e){this.beforeLoadDelayedCallbacks.push(e)}addLoadDelayedTask(e){this.loadDelayedCallbacks.push(e)}addInitializedTask(e){this.initializedCallbacks.push(e)}async init(){await this.beforeEager,await this.loadEager,await this.beforeLoadLazy,await this.loadLazy,await this.beforeLoadDelayed,await this.loadDelayed,await this.initialized}async beforeLoadEager(){const e=new Promise(a=>{H(),I(),j(),a()});await Promise.all([...this.beforeEagerCallbacks.map(a=>a()),e])}async loadEagerPromise(){const e=new Promise(async a=>{try{const t=document.querySelector("main");B(t),R(t),A(t),document.body.classList.add("show"),(window.innerWidth>=900||sessionStorage.getItem("fonts-loaded"))&&await S(),a()}catch(t){w.error("index: could not load fonts",t)}});await Promise.all([...this.loadEagerCallbacks.map(a=>a()),e,F()])}async beforeLoadLazyPromise(){const e=new Promise(a=>a());await Promise.all([...this.beforeLoadLazyCallbacks.map(a=>a()),e])}async loadLazyPromise(){const e=new Promise(async a=>{try{const{lazyStylesScssPath:t,fontsScssPath:o,lazyStylesCssPath:r,sidekickLibraryStylesScssPath:n,sidekickLibraryStylesCssPath:d,universalEditorStylesScssPath:l,universalEditorStylesCssPath:c}=g;await U();const{hash:m}=window.location,h=m?document.getElementById(m.substring(1)):!1;m&&h&&h.scrollIntoView(),t&&r&&await u(r),n&&d&&C()&&await u(d),l&&c&&M()&&await u(c),o&&await S(),i("lazy");const y=document.querySelector("main");i.observe(y.querySelectorAll("div[data-block-name]")),i.observe(y.querySelectorAll("picture > img"))}catch(t){w.error("LoadLazyTask: ",t)}a()});await Promise.all([...this.loadLazyCallbacks.map(a=>a()),e])}async beforeLoadDelayedPromise(){const e=new Promise(a=>a());await Promise.all([...this.beforeLoadDelayedCallbacks.map(a=>a()),e])}async loadDelayedPromise(){const e=new Promise(a=>{setTimeout(()=>{a()},3e3)});await Promise.all([...this.loadDelayedCallbacks.map(a=>a()),e])}async getInitializedPromise(){const e=new Promise(a=>a());await Promise.all([...this.initializedCallbacks.map(a=>a()),e])}}const z=new N,f={interactive:"interactive",complete:"complete"};async function E(){z.addBeforeEagerTask(()=>(document.getElementsByTagName("main")[0].setAttribute("id","main"),Promise.resolve())),await z.init()}function O(){document.readyState===f.interactive||document.readyState===f.complete?E():document.addEventListener("readystatechange",()=>{const s=document.readyState;(s===f.interactive||s===f.complete)&&E()})}O();
//# sourceMappingURL=main.js.map
