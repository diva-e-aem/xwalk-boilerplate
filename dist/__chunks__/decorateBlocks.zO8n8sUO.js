import{_ as u}from"./preload-helper.DX1wzJSG.js";import{m as d}from"./index.module.DQI0LCqS.js";import{i as p}from"./isSidekickLibraryActive.U-fJCMMj.js";function l(t){return t.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function x(t){t==null||t.querySelectorAll("a").forEach(a=>{if(a.title=a.title||a.textContent,a.href!==a.textContent){const s=a.parentElement,e=a.parentElement.parentElement;a.querySelector("img")||(s.childNodes.length===1&&(s.tagName==="P"||s.tagName==="DIV")&&(a.className="button",s.classList.add("button-container")),s.childNodes.length===1&&s.tagName==="STRONG"&&e.childNodes.length===1&&e.tagName==="P"&&(a.className="button primary",e.classList.add("button-container")),s.childNodes.length===1&&s.tagName==="EM"&&e.childNodes.length===1&&e.tagName==="P"&&(a.className="button secondary",e.classList.add("button-container")))}})}function h(){return p()?window.parent.location.origin:window.location.origin}const f=t=>{try{const a=h(),s=window.hlx.codeBasePath.endsWith("/")?window.hlx.codeBasePath:`${window.hlx.codeBasePath}/`;let e=t;t.startsWith("./")?e=t.substring(2):t.startsWith("/")&&(e=t.substring(1));const r=`${s}${e}`;return new URL(r,a)}catch(a){throw new Error(`Failed to build Url for endpoint: ${a}`)}};function m(t){return new Promise((a,s)=>{const{href:e}=f(t);if(document.querySelector(`head > link[href="${e}"]`))a();else{const r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onload=()=>a(),r.onerror=s,document.head.append(r)}})}async function g(t){const a=t.dataset.blockStatus;if(a!=="loading"&&a!=="loaded"){t.dataset.blockStatus="loading";const{blockName:s}=t.dataset;try{const e=await m(`dist/${s}/${s}.css`),r=new Promise(o=>{(async()=>{try{const{href:n}=f(`dist/${s}/${s}.js`),i=await u(()=>import(n),__vite__mapDeps([]));i.default&&await i.default(t)}catch(n){d.error(`failed to load module for ${s}`,n)}o()})()});await Promise.all([e,r])}catch(e){d.error(`failed to load block ${s}`,e)}t.dataset.blockStatus="loaded"}}async function y(t,a){const s=t.dataset.sectionStatus;if(!s||s==="initialized"){t.dataset.sectionStatus="loading";const e=[...t.querySelectorAll("div.block")];for(let r=0;r<e.length;r+=1)await g(e[r]);t.dataset.sectionStatus="loaded",t.style.removeProperty("display")}}async function C(t=document){if(t){const s=[...t.querySelectorAll(".section")].map(e=>y(e));await Promise.all(s)}}function S(){document.querySelectorAll(".default-content-wrapper picture").forEach(a=>{const s=a.parentElement;s&&s.classList.add("image","main")})}function E(t){const a=[];let s=!1;[...t.children].forEach(e=>{if(e.tagName==="DIV"||!s){const r=document.createElement("div");a.push(r),s=e.tagName!=="DIV",s&&r.classList.add("default-content-wrapper")}a[a.length-1].append(e)}),a.forEach(e=>t.append(e)),S(),t.classList.add("section"),t.dataset.sectionStatus="initialized",t.style.display="none"}function w(t){return/^[a-z][A-Za-z0-9]*$/.test(t)?t:/^[A-Z][A-Za-z0-9]*$/.test(t)?t.charAt(0).toLowerCase()+t.slice(1):l(t).replace(/-([a-z])/g,a=>a[1].toUpperCase())}function N(t){const a={};return t.querySelectorAll(":scope > div").forEach(s=>{if(s.children){const e=[...s.children];if(e[1]){const r=e[1],o=l(e[0].textContent??"");let n="";if(r.querySelector("a")){const i=[...r.querySelectorAll("a")];i.length===1?n=i[0].href:n=i.map(c=>c.href)}else if(r.querySelector("img")){const i=[...r.querySelectorAll("img")];i.length===1?n=i[0].src:n=i.map(c=>c.src)}else if(r.querySelector("p")){const i=[...r.querySelectorAll("p")];i.length===1?n=i[0].textContent:n=i.map(c=>c.textContent)}else n=s.children[1].textContent;a[o]=n}}}),a}function A(t){const a=t.querySelector("div.section-metadata");if(a){const s=N(a);Object.keys(s).forEach(e=>{e==="style"?s.style.split(",").filter(o=>o).map(o=>l(o.trim())).forEach(o=>t.classList.add(o)):t.dataset[w(e)]=s[e]}),a.parentElement&&a.parentElement.remove()}}function B(t){t==null||t.querySelectorAll(":scope > div").forEach(a=>{E(a),A(a)})}function L(t){const a=["P","PRE","UL","OL","PICTURE","TABLE","H1","H2","H3","H4","H5","H6"],s=e=>{const r=document.createElement("p");r.append(...e.childNodes),[...e.attributes].filter(({nodeName:o})=>o==="class"||o.startsWith("data-aue")||o.startsWith("data-richtext")).forEach(({nodeName:o,nodeValue:n})=>{r.setAttribute(o,n||""),e.removeAttribute(o)}),e.append(r)};t.querySelectorAll(":scope > div > div").forEach(e=>{var r,o;e.hasChildNodes()&&(!!e.firstElementChild&&a.some(i=>{var c;return((c=e==null?void 0:e.firstElementChild)==null?void 0:c.tagName)===i})?((r=e.firstElementChild)==null?void 0:r.tagName)==="PICTURE"&&(e.children.length>1||(o=e.textContent)!=null&&o.trim())&&s(e):s(e))})}function P(t){if(t){const a=t.classList[0];if(a&&!t.dataset.blockStatus){t.classList.add("block"),t.dataset.blockName=a,t.dataset.blockStatus="initialized",L(t);const s=t.parentElement;s==null||s.classList.add(`${a}-wrapper`);const e=t.closest(".section");e&&e.classList.add(`${a}-container`)}}}function z(t){t==null||t.querySelectorAll("div.section > div > div").forEach(a=>{P(a)})}export{g as a,B as b,z as c,x as d,C as e,m as l,l as t};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=decorateBlocks.zO8n8sUO.js.map
