{"version":3,"file":"customtitle.js","sources":["../../node_modules/lit-html/static.js","../../src/blocks/customtitle/customtitle.ts"],"sourcesContent":["import{html as t,svg as r}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=Symbol.for(\"\"),o=t=>{if(t?.r===e)return t?._$litStatic$},i=t=>({_$litStatic$:t,r:e}),s=(t,...r)=>({_$litStatic$:r.reduce(((r,e,o)=>r+(t=>{if(void 0!==t._$litStatic$)return t._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t}. Use 'unsafeStatic' to pass non-literal values, but\\n            take care to ensure page security.`)})(e)+t[o+1]),t[0]),r:e}),a=new Map,l=t=>(r,...e)=>{const i=e.length;let s,l;const n=[],u=[];let c,$=0,f=!1;for(;$<i;){for(c=r[$];$<i&&void 0!==(l=e[$],s=o(l));)c+=s+r[++$],f=!0;$!==i&&u.push(l),n.push(c),$++}if($===i&&n.push(r[i]),f){const t=n.join(\"$$lit$$\");void 0===(r=a.get(t))&&(n.raw=n,a.set(t,r=n)),e=u}return t(r,...e)},n=l(t),u=l(r);export{n as html,s as literal,u as svg,i as unsafeStatic,l as withStatic};\n//# sourceMappingURL=static.js.map\n","/* eslint-disable no-console */\nimport { html, literal } from 'lit/static-html.js';\nimport { nothing, render, TemplateResult } from 'lit';\n\nimport './customtitle.scss';\nimport { cleanUpBlock } from 'Utils/cleanUpBlock';\n// import { renderBlock } from 'Helpers/renderBlock';\n\n// const template = (text: string): TemplateResult => {\n//   return html`<h1>${text}</h1>`;\n// };\n\nfunction createAttributeMap(field: Element) {\n  const attributes = field.attributes;\n  return [...attributes]\n    .map(({ nodeName }) => nodeName)\n    .filter((attr) => attr.startsWith('data-aue-') || attr.startsWith('data-richtext-'))\n    .map((attribute) => {\n      return {\n        [attribute]: field.getAttribute(attribute),\n      };\n    });\n}\n\nfunction getDataForField(block: HTMLElement) {\n  return (propName: string) => {\n    const field = block.querySelector(`[data-aue-prop=\"${propName}\"]`);\n\n    return {\n      textContent: field?.textContent,\n      innerHTML: field?.innerHTML,\n      dataAttributes: field ? createAttributeMap(field) : null,\n    };\n  };\n}\n\ntype Props = {\n  titleText?: string | null;\n  titleType?: string | null;\n  titleAttributes?: Record<string, string>;\n};\n\nconst template = ({ titleText, titleType }: Props): TemplateResult | typeof nothing => {\n  if (!titleText) {\n    return nothing;\n  }\n\n  if (!titleType) {\n    titleType = 'h2';\n  }\n\n  return html`\n    <div style=\"background: red\">\n      <${literal`${titleType}`}>${titleText}</${literal`${titleType}`}>\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const dataFetcher = getDataForField(block);\n  const { textContent: titleText, dataAttributes: titleAttributes } = dataFetcher('customTitle');\n  const { textContent: titleType } = dataFetcher('titleType');\n  console.log('>>> 1', block);\n  console.log('>>> d p-tag', titleText);\n  console.log('>>> d p-attributes', titleAttributes);\n\n  cleanUpBlock(block);\n\n  render(template({ titleText, titleType }), block);\n\n  const h1 = block.querySelector('h1');\n  titleAttributes?.forEach((attr) => {\n    const key = Object.keys(attr)[0];\n    const value = attr[key];\n    console.log('>>> setKeyValue', key, value);\n    if (!value) return;\n    h1?.setAttribute(key, value);\n  });\n\n  // const textElement = block.children[0].children[0];\n\n  // renderBlock({\n  //   template: template(text),\n  //   container: block,\n  //   moveInstrumentationsOptions: {\n  //     from: textElement,\n  //     to: block.querySelector('h1') as Element,\n  //   },\n  // });\n\n  // console.log('>>> render finished', block);\n  // Array.from(attributes).forEach((attr) => {\n  //   const value = block.querySelector('p')!.getAttribute(attr);\n  //   if (value) {\n  //     to.setAttribute(attr, value);\n  //     from.removeAttribute(attr);\n  //   }\n  // });\n}\n"],"names":["e","o","t","s","r","a","l","i","n","u","c","$","f","createAttributeMap","field","nodeName","attr","attribute","getDataForField","block","propName","template","titleText","titleType","html","literal","nothing","customtitle","dataFetcher","titleAttributes","cleanUpBlock","render","h1","key","value"],"mappings":"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","x_google_ignoreList":[0]}