{"version":3,"file":"customtitle.js","sources":["../../src/utils/createAttributeMap.ts","../../src/utils/getElementData.ts","../../src/blocks/customtitle/customtitle.ts"],"sourcesContent":["export function createAttributeMap(element: Element) {\n  const attributes = element.attributes;\n  return [...attributes]\n    .map(({ nodeName }) => nodeName)\n    .filter((attr) => attr.startsWith('data-aue-') || attr.startsWith('data-richtext-'))\n    .map((attribute) => {\n      return {\n        [attribute]: element.getAttribute(attribute),\n      };\n    });\n}\n","import { createAttributeMap } from './createAttributeMap';\n\nexport function getElementData(block: HTMLElement) {\n  return (rowIndex: number = 0) => {\n    const row = block.children[rowIndex] as HTMLElement;\n\n    let element = row;\n\n    // find the deepest child element\n    while (element.children.length) {\n      element = element.children[0] as HTMLElement;\n    }\n\n    return {\n      element,\n      textContent: element?.textContent || undefined,\n      innerHTML: element?.innerHTML || undefined,\n      dataAttributes: element ? createAttributeMap(element) : undefined,\n    };\n  };\n}\n","import { html, nothing, render, TemplateResult } from 'lit';\n\nimport { cleanUpBlock } from 'Utils/cleanUpBlock';\n\nimport './customtitle.scss';\nimport { getElementData } from 'Utils/getElementData';\nimport { moveInstrumentation } from 'Helpers/moveInstrumentation';\n\ntype TemplateProps = {\n  titleText?: string;\n  titleType?: string | undefined;\n  titleAttributes?: Record<string, string>;\n};\n\nconst renderHeadline = (tag: string, text: string, cssClass: string) => {\n  if (tag === 'h1') return html`<h1 data-js-title class=\"${cssClass}\">${text}</h1>`;\n  if (tag === 'h2') return html`<h2 data-js-title class=\"${cssClass}\">${text}</h2>`;\n  if (tag === 'h3') return html`<h3 data-js-title class=\"${cssClass}\">${text}</h3>`;\n  if (tag === 'h4') return html`<h4 data-js-title class=\"${cssClass}\">${text}</h4>`;\n  if (tag === 'h5') return html`<h5 data-js-title class=\"${cssClass}\">${text}</h5>`;\n  if (tag === 'h6') return html`<h6 data-js-title class=\"${cssClass}\">${text}</h6>`;\n  return nothing;\n};\n\nconst template = ({ titleText, titleType = 'h2' }: TemplateProps): TemplateResult | typeof nothing => {\n  if (!titleText) {\n    return nothing;\n  }\n\n  return html` <div style=\"background: red\">${renderHeadline(titleType, titleText, 'custom-title')}</div> `;\n};\n\nexport default function (block: HTMLElement) {\n  // eslint-disable-next-line no-console\n  console.log('>>> decorate block a', block);\n\n  const getDataForRow = getElementData(block);\n  const { textContent: titleText, element: titleElement } = getDataForRow(0);\n  const { textContent: titleType } = getDataForRow(1);\n\n  console.log('>>> titleText', titleText);\n\n  cleanUpBlock(block);\n  render(template({ titleText, titleType }), block);\n\n  // eslint-disable-next-line no-console\n  console.log('>>> rendered a');\n\n  const headline = block.querySelector('[data-js-title]') as HTMLElement;\n\n  moveInstrumentation(titleElement, headline);\n  // titleAttributes?.forEach((attr) => {\n  //   const key = Object.keys(attr)[0];\n  //   const value = attr[key];\n  //   if (!value) return;\n  //   headline?.setAttribute(key, value);\n  // });\n}\n"],"names":["createAttributeMap","element","nodeName","attr","attribute","getElementData","block","rowIndex","renderHeadline","tag","text","cssClass","html","nothing","template","titleText","titleType","customtitle","getDataForRow","titleElement","cleanUpBlock","render","headline","moveInstrumentation"],"mappings":"qMAAO,SAASA,EAAmBC,EAAkB,CAE5C,MAAA,CAAC,GADWA,EAAQ,UACN,EAClB,IAAI,CAAC,CAAE,SAAAC,KAAeA,CAAQ,EAC9B,OAAQC,GAASA,EAAK,WAAW,WAAW,GAAKA,EAAK,WAAW,gBAAgB,CAAC,EAClF,IAAKC,IACG,CACL,CAACA,CAAS,EAAGH,EAAQ,aAAaG,CAAS,CAAA,EAE9C,CACL,CCRO,SAASC,EAAeC,EAAoB,CAC1C,MAAA,CAACC,EAAmB,IAAM,CAG/B,IAAIN,EAFQK,EAAM,SAASC,CAAQ,EAK5B,KAAAN,EAAQ,SAAS,QACZA,EAAAA,EAAQ,SAAS,CAAC,EAGvB,MAAA,CACL,QAAAA,EACA,aAAaA,GAAA,YAAAA,EAAS,cAAe,OACrC,WAAWA,GAAA,YAAAA,EAAS,YAAa,OACjC,eAAgBA,EAAUD,EAAmBC,CAAO,EAAI,MAAA,CAC1D,CAEJ,CCNA,MAAMO,EAAiB,CAACC,EAAaC,EAAcC,IAC7CF,IAAQ,KAAaG,6BAAgCD,CAAQ,KAAKD,CAAI,QACtED,IAAQ,KAAaG,6BAAgCD,CAAQ,KAAKD,CAAI,QACtED,IAAQ,KAAaG,6BAAgCD,CAAQ,KAAKD,CAAI,QACtED,IAAQ,KAAaG,6BAAgCD,CAAQ,KAAKD,CAAI,QACtED,IAAQ,KAAaG,6BAAgCD,CAAQ,KAAKD,CAAI,QACtED,IAAQ,KAAaG,6BAAgCD,CAAQ,KAAKD,CAAI,QACnEG,EAGHC,EAAW,CAAC,CAAE,UAAAC,EAAW,UAAAC,EAAY,QACpCD,EAIEH,gCAAqCJ,EAAeQ,EAAWD,EAAW,cAAc,CAAC,SAHvFF,EAMX,SAAAI,EAAyBX,EAAoB,CAEnC,QAAA,IAAI,uBAAwBA,CAAK,EAEnC,MAAAY,EAAgBb,EAAeC,CAAK,EACpC,CAAE,YAAaS,EAAW,QAASI,GAAiBD,EAAc,CAAC,EACnE,CAAE,YAAaF,CAAU,EAAIE,EAAc,CAAC,EAE1C,QAAA,IAAI,gBAAiBH,CAAS,EAEtCK,EAAad,CAAK,EAClBe,EAAOP,EAAS,CAAE,UAAAC,EAAW,UAAAC,CAAW,CAAA,EAAGV,CAAK,EAGhD,QAAQ,IAAI,gBAAgB,EAEtB,MAAAgB,EAAWhB,EAAM,cAAc,iBAAiB,EAEtDiB,EAAoBJ,EAAcG,CAAQ,CAO5C"}