{"version":3,"file":"title.js","sources":["../../src/blocks/title/title.ts"],"sourcesContent":["import { html, literal, StaticValue } from 'lit/static-html.js';\nimport { nothing, render, TemplateResult } from 'lit';\nimport './title.scss';\n\nimport { getElementData } from 'Utils/getElementData';\nimport { moveInstrumentation } from 'Helpers/moveInstrumentation';\nimport { getBlockModifiers } from 'Utils/getBlockModifiers';\nimport { cleanUpBlock } from 'Utils/cleanUpBlock';\n\ntype TemplateProps = {\n  titleText?: string;\n  subline?: string;\n  tagName?: string;\n  cssClass?: string;\n  sublineLarge?: string;\n};\n\nconst possibleStyleModifiers = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\nconst getStyleModifier = (modifiers: string[]) => {\n  return modifiers.find((modifier) => possibleStyleModifiers.includes(modifier)) || 'h1';\n};\n\nconst renderHeadline = (tagName: string, text: string, cssClass: string) => {\n  const tagMap: Record<string, StaticValue> = {\n    h1: literal`h1`,\n    h2: literal`h2`,\n    h3: literal`h3`,\n    h4: literal`h4`,\n    h5: literal`h5`,\n    h6: literal`h6`,\n  };\n\n  const tag = tagMap[tagName];\n\n  return html`\n    <${tag} class=\"module-headline ${cssClass}\">${text}</${tag}>\n  `;\n};\n\nconst renderSubline = (subline: string, sublineLarge?: string) => {\n  if (subline === '') return nothing;\n  return html`<p class=\"module-subtitle${sublineLarge === 'large-subline' ? ' large-subline' : ''}\">${subline}</p>`;\n};\n\nconst template = ({\n  titleText,\n  subline = '',\n  tagName = 'h2',\n  cssClass = 'h1',\n  sublineLarge = '',\n}: TemplateProps): TemplateResult | typeof nothing => {\n  if (!titleText) {\n    return nothing;\n  }\n\n  return html`\n    <div class=\"module-title\" data-js-richtext>\n      ${renderHeadline(tagName, titleText, cssClass)}${renderSubline(subline, sublineLarge)}\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const modifiers = getBlockModifiers(block, 'customtitle');\n  const getDataForRow = getElementData(block);\n  const { richtext } = getDataForRow(0, ['richtext']);\n  const richtextEl = richtext.element;\n  const titleElement = richtext.element?.children[0];\n  const sublineElement = richtext.element?.children[1];\n  const tagName = titleElement?.tagName.toLowerCase() || 'h2';\n\n  cleanUpBlock(block);\n\n  render(\n    template({\n      titleText: titleElement?.textContent || '',\n      subline: sublineElement?.innerHTML || '',\n      tagName,\n      cssClass: getStyleModifier(modifiers),\n      sublineLarge: modifiers.includes('large-subline') ? 'large-subline' : '',\n    }),\n    block\n  );\n\n  const newRichtextEl = block.querySelector('[data-js-richtext]');\n  if (richtextEl && newRichtextEl) moveInstrumentation(richtextEl, newRichtextEl);\n}\n"],"names":["possibleStyleModifiers","getStyleModifier","modifiers","modifier","renderHeadline","tagName","text","cssClass","tag","literal","html","renderSubline","subline","sublineLarge","nothing","template","titleText","title","block","getBlockModifiers","getDataForRow","getElementData","richtext","richtextEl","titleElement","_a","sublineElement","_b","cleanUpBlock","render","newRichtextEl","moveInstrumentation"],"mappings":"4TAiBA,MAAMA,EAAyB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAE5DC,EAAoBC,GACjBA,EAAU,KAAMC,GAAaH,EAAuB,SAASG,CAAQ,CAAC,GAAK,KAG9EC,EAAiB,CAACC,EAAiBC,EAAcC,IAAqB,CAUpE,MAAAC,EATsC,CAC1C,GAAIC,MACJ,GAAIA,MACJ,GAAIA,MACJ,GAAIA,MACJ,GAAIA,MACJ,GAAIA,KAAA,EAGaJ,CAAO,EAEnB,OAAAK;AAAAA,OACFF,CAAG,2BAA2BD,CAAQ,KAAKD,CAAI,KAAKE,CAAG;AAAA,GAE9D,EAEMG,EAAgB,CAACC,EAAiBC,IAClCD,IAAY,GAAWE,EACpBJ,6BAAgCG,IAAiB,gBAAkB,iBAAmB,EAAE,KAAKD,CAAO,OAGvGG,EAAW,CAAC,CAChB,UAAAC,EACA,QAAAJ,EAAU,GACV,QAAAP,EAAU,KACV,SAAAE,EAAW,KACX,aAAAM,EAAe,EACjB,IACOG,EAIEN;AAAAA;AAAAA,QAEDN,EAAeC,EAASW,EAAWT,CAAQ,CAAC,GAAGI,EAAcC,EAASC,CAAY,CAAC;AAAA;AAAA,IALhFC,EAUX,SAAAG,EAAyBC,EAAoB,SACrC,MAAAhB,EAAYiB,EAAkBD,EAAO,aAAa,EAClDE,EAAgBC,EAAeH,CAAK,EACpC,CAAE,SAAAI,CAAS,EAAIF,EAAc,EAAG,CAAC,UAAU,CAAC,EAC5CG,EAAaD,EAAS,QACtBE,GAAeC,EAAAH,EAAS,UAAT,YAAAG,EAAkB,SAAS,GAC1CC,GAAiBC,EAAAL,EAAS,UAAT,YAAAK,EAAkB,SAAS,GAC5CtB,GAAUmB,GAAA,YAAAA,EAAc,QAAQ,gBAAiB,KAEvDI,EAAaV,CAAK,EAElBW,EACEd,EAAS,CACP,WAAWS,GAAA,YAAAA,EAAc,cAAe,GACxC,SAASE,GAAA,YAAAA,EAAgB,YAAa,GACtC,QAAArB,EACA,SAAUJ,EAAiBC,CAAS,EACpC,aAAcA,EAAU,SAAS,eAAe,EAAI,gBAAkB,EAAA,CACvE,EACDgB,CAAA,EAGI,MAAAY,EAAgBZ,EAAM,cAAc,oBAAoB,EAC1DK,GAAcO,GAAeC,EAAoBR,EAAYO,CAAa,CAChF"}